var Kitchen;(()=>{var e={153:(e,t,n)=>{var r;/*! howler.js v2.2.0 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com */!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var e=this||i;return e.t=1e3,e.m=[],e.html5PoolSize=10,e.M={},e.A=[],e.$=!1,e._=1,e.C="canplaythrough",e.F="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e.T(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||v(),void 0!==e&&e>=0&&e<=1){if(t._=e,t.$)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t.A.length;n++)if(!t.A[n].P)for(var r=t.A[n].k(),o=0;o<r.length;o++){var u=t.A[n].S(r[o]);u&&u.I&&(u.I.volume=u._*e)}return t}return t._},mute:function(e){var t=this||i;t.ctx||v(),t.$=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._,i.ctx.currentTime);for(var n=0;n<t.A.length;n++)if(!t.A[n].P)for(var r=t.A[n].k(),o=0;o<r.length;o++){var u=t.A[n].S(r[o]);u&&u.I&&(u.I.muted=!!e||u.$)}return t},stop:function(){for(var e=this||i,t=0;t<e.A.length;t++)e.A[t].stop();return e},unload:function(){for(var e=this||i,t=e.A.length-1;t>=0;t--)e.A[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,v()),e},codecs:function(e){return(this||i).M[e.replace(/^x-/,"")]},T:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e.D(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e.C="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e.j(),e},j:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e.F&&e.F.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return e.M={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},R:function(){var e=this||i;if(!e.N&&e.ctx){e.N=!1,e.autoUnlock=!1,e.O||44100===e.ctx.sampleRate||(e.O=!0,e.unload()),e.B=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e.m.length<e.html5PoolSize;)try{var r=new Audio;r.L=!0,e.K(r)}catch(n){e.noAudio=!0;break}for(var o=0;o<e.A.length;o++)if(!e.A[o].P)for(var i=e.A[o].k(),u=0;u<i.length;u++){var l=e.A[o].S(i[u]);l&&l.I&&!l.I.L&&(l.I.L=!0,l.I.load())}e.U();var a=e.ctx.createBufferSource();a.buffer=e.B,a.connect(e.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),a.onended=function(){a.disconnect(0),e.N=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e.A.length;n++)e.A[n].G("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e.m.length)return e.m.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},K:function(e){var t=this||i;return e.L&&t.m.push(e),t},D:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e.A.length;t++)if(e.A[t].P)for(var n=0;n<e.A[t].V.length;n++)if(!e.A[t].V[n].q)return e;return e.H&&clearTimeout(e.H),e.H=setTimeout((function(){if(e.autoSuspend){e.H=null,e.state="suspending";var t=function(){e.state="suspended",e.X&&(delete e.X,e.U())};e.ctx.suspend().then(t,t)}}),3e4),e}},U:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e.H?(clearTimeout(e.H),e.H=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e.A.length;t++)e.A[t].G("resume")})),e.H&&(clearTimeout(e.H),e.H=null)):"suspending"===e.state&&(e.X=!0),e}};var i=new o,u=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};u.prototype={init:function(e){var t=this;return i.ctx||v(),t.Y=e.autoplay||!1,t.W="string"!=typeof e.format?e.format:[e.format],t.Z=e.html5||!1,t.$=e.mute||!1,t.J=e.loop||!1,t.ee=e.pool||5,t.te="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t.ne=e.rate||1,t.re=e.sprite||{},t.oe="string"!=typeof e.src?e.src:[e.src],t._=void 0!==e.volume?e.volume:1,t.ie={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t.le=0,t.ae="unloaded",t.V=[],t.fe={},t.ce=[],t.se=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t.P=i.usingWebAudio&&!t.Z,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i.R(),i.A.push(t),t.Y&&t.ce.push({event:"play",action:function(){t.play()}}),t.te&&"none"!==t.te&&t.load(),t},load:function(){var e=this,t=null;if(!i.noAudio){"string"==typeof e.oe&&(e.oe=[e.oe]);for(var n=0;n<e.oe.length;n++){var r,o;if(e.W&&e.W[n])r=e.W[n];else{if("string"!=typeof(o=e.oe[n])){e.G("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(o))||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&i.codecs(r)){t=e.oe[n];break}}return t?(e.oe=t,e.ae="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e.Z=!0,e.P=!1),new l(e),e.P&&f(e),e):void e.G("loaderror",null,"No codec support for selected audio sources.")}e.G("loaderror",null,"No audio support.")},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n.ae&&!n.re[e])return null;if(void 0===e&&(e="__default",!n.se)){for(var o=0,u=0;u<n.V.length;u++)n.V[u].q&&!n.V[u].de&&(o++,r=n.V[u].ve);1===o?e=null:r=null}}var l=r?n.S(r):n.he();if(!l)return null;if(r&&!e&&(e=l.re||"__default"),"loaded"!==n.ae){l.re=e,l.de=!1;var a=l.ve;return n.ce.push({event:"play",action:function(){n.play(a)}}),a}if(r&&!l.q)return t||n.me("play"),l.ve;n.P&&i.U();var f=Math.max(0,l.pe>0?l.pe:n.re[e][0]/1e3),c=Math.max(0,(n.re[e][0]+n.re[e][1])/1e3-f),s=1e3*c/Math.abs(l.ne),d=n.re[e][0]/1e3,v=(n.re[e][0]+n.re[e][1])/1e3;l.re=e,l.de=!1;var h=function(){l.q=!1,l.pe=f,l.we=d,l.ye=v,l.J=!(!l.J&&!n.re[e][2])};if(!(f>=v)){var m=l.I;if(n.P){var p=function(){n.se=!1,h(),n.Me(l);var e=l.$||n.$?0:l._;m.gain.setValueAtTime(e,i.ctx.currentTime),l.be=i.ctx.currentTime,void 0===m.bufferSource.start?l.J?m.bufferSource.noteGrainOn(0,f,86400):m.bufferSource.noteGrainOn(0,f,c):l.J?m.bufferSource.start(0,f,86400):m.bufferSource.start(0,f,c),s!==1/0&&(n.fe[l.ve]=setTimeout(n.de.bind(n,l),s)),t||setTimeout((function(){n.G("play",l.ve),n.me()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?p():(n.se=!0,n.once("resume",p),n.ge(l.ve))}else{var w=function(){m.currentTime=f,m.muted=l.$||n.$||i.$||m.muted,m.volume=l._*i.volume(),m.playbackRate=l.ne;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n.se=!0,h(),r.then((function(){n.se=!1,m.L=!0,t||(n.G("play",l.ve),n.me())})).catch((function(){n.se=!1,n.G("playerror",l.ve,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l.de=!0,l.q=!0}))):t||(n.se=!1,h(),n.G("play",l.ve),n.me()),m.playbackRate=l.ne,m.paused)return void n.G("playerror",l.ve,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||l.J?n.fe[l.ve]=setTimeout(n.de.bind(n,l),s):(n.fe[l.ve]=function(){n.de(l),m.removeEventListener("ended",n.fe[l.ve],!1)},m.addEventListener("ended",n.fe[l.ve],!1))}catch(e){n.G("playerror",l.ve,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n.oe,m.load());var y=window&&window.ejecta||!m.readyState&&i.F.isCocoonJS;if(m.readyState>=3||y)w();else{n.se=!0;var M=function(){w(),m.removeEventListener(i.C,M,!1)};m.addEventListener(i.C,M,!1),n.ge(l.ve)}}return l.ve}n.de(l)},pause:function(e){var t=this;if("loaded"!==t.ae||t.se)return t.ce.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t.k(e),r=0;r<n.length;r++){t.ge(n[r]);var o=t.S(n[r]);if(o&&!o.q&&(o.pe=t.seek(n[r]),o.Ae=0,o.q=!0,t.xe(n[r]),o.I))if(t.P){if(!o.I.bufferSource)continue;void 0===o.I.bufferSource.stop?o.I.bufferSource.noteOff(0):o.I.bufferSource.stop(0),t.$e(o.I)}else isNaN(o.I.duration)&&o.I.duration!==1/0||o.I.pause();arguments[1]||t.G("pause",o?o.ve:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n.ae||n.se)return n.ce.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n.k(e),o=0;o<r.length;o++){n.ge(r[o]);var i=n.S(r[o]);i&&(i.pe=i.we||0,i.Ae=0,i.q=!0,i.de=!0,n.xe(r[o]),i.I&&(n.P?i.I.bufferSource&&(void 0===i.I.bufferSource.stop?i.I.bufferSource.noteOff(0):i.I.bufferSource.stop(0),n.$e(i.I)):isNaN(i.I.duration)&&i.I.duration!==1/0||(i.I.currentTime=i.we||0,i.I.pause(),i.I.duration===1/0&&n._e(i.I))),t||n.G("stop",i.ve))}return n},mute:function(e,t){var n=this;if("loaded"!==n.ae||n.se)return n.ce.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n.$;n.$=e}for(var r=n.k(t),o=0;o<r.length;o++){var u=n.S(r[o]);u&&(u.$=e,u.Ce&&n.xe(u.ve),n.P&&u.I?u.I.gain.setValueAtTime(e?0:u._,i.ctx.currentTime):u.I&&(u.I.muted=!!i.$||e),n.G("mute",u.ve))}return n},volume:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._;if(1===o.length||2===o.length&&void 0===o[1]?r.k().indexOf(o[0])>=0?t=parseInt(o[0],10):e=parseFloat(o[0]):o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r.S(t):r.V[0])?n._:0;if("loaded"!==r.ae||r.se)return r.ce.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===t&&(r._=e),t=r.k(t);for(var u=0;u<t.length;u++)(n=r.S(t[u]))&&(n._=e,o[2]||r.xe(t[u]),r.P&&n.I&&!n.$?n.I.gain.setValueAtTime(e,i.ctx.currentTime):n.I&&!n.$&&(n.I.volume=e*i.volume()),r.G("volume",n.ve));return r},fade:function(e,t,n,r){var o=this;if("loaded"!==o.ae||o.se)return o.ce.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),o.volume(e,r);for(var u=o.k(r),l=0;l<u.length;l++){var a=o.S(u[l]);if(a){if(r||o.xe(u[l]),o.P&&!a.$){var f=i.ctx.currentTime,c=f+n/1e3;a._=e,a.I.gain.setValueAtTime(e,f),a.I.gain.linearRampToValueAtTime(t,c)}o.Fe(a,e,t,n,u[l],void 0===r)}}return o},Fe:function(e,t,n,r,o,i){var u=this,l=t,a=n-t,f=Math.abs(a/.01),c=Math.max(4,f>0?r/f:r),s=Date.now();e.Te=n,e.Ce=setInterval((function(){var o=(Date.now()-s)/r;s=Date.now(),l+=a*o,l=a<0?Math.max(n,l):Math.min(n,l),l=Math.round(100*l)/100,u.P?e._=l:u.volume(l,e.ve,!0),i&&(u._=l),(n<t&&l<=n||n>t&&l>=n)&&(clearInterval(e.Ce),e.Ce=null,e.Te=null,u.volume(n,e.ve),u.G("fade",e.ve))}),c)},xe:function(e){var t=this,n=t.S(e);return n&&n.Ce&&(t.P&&n.I.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n.Ce),n.Ce=null,t.volume(n.Te,e),n.Te=null,t.G("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r.J;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r.S(parseInt(o[0],10)))&&n.J;e=o[0],r.J=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r.k(t),u=0;u<i.length;u++)(n=r.S(i[u]))&&(n.J=e,r.P&&n.I&&n.I.bufferSource&&(n.I.bufferSource.loop=e,e&&(n.I.bufferSource.loopStart=n.we||0,n.I.bufferSource.loopEnd=n.ye)));return r},rate:function(){var e,t,n,r=this,o=arguments;if(0===o.length)t=r.V[0].ve;else if(1===o.length){var u=r.k(),l=u.indexOf(o[0]);l>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(n=r.S(t))?n.ne:r.ne;if("loaded"!==r.ae||r.se)return r.ce.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===t&&(r.ne=e),t=r.k(t);for(var a=0;a<t.length;a++)if(n=r.S(t[a])){r.playing(t[a])&&(n.Ae=r.seek(t[a]),n.be=r.P?i.ctx.currentTime:n.be),n.ne=e,r.P&&n.I&&n.I.bufferSource?n.I.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):n.I&&(n.I.playbackRate=e);var f=r.seek(t[a]),c=(r.re[n.re][0]+r.re[n.re][1])/1e3-f,s=1e3*c/Math.abs(n.ne);!r.fe[t[a]]&&n.q||(r.ge(t[a]),r.fe[t[a]]=setTimeout(r.de.bind(r,n),s)),r.G("rate",n.ve)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n.V[0].ve;else if(1===r.length){var o=n.k(),u=o.indexOf(r[0]);u>=0?t=parseInt(r[0],10):n.V.length&&(t=n.V[0].ve,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n.ae||n.se)return n.ce.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var l=n.S(t);if(l){if(!("number"==typeof e&&e>=0)){if(n.P){var a=n.playing(t)?i.ctx.currentTime-l.be:0,f=l.Ae?l.Ae-l.pe:0;return l.pe+(f+a*Math.abs(l.ne))}return l.I.currentTime}var c=n.playing(t);c&&n.pause(t,!0),l.pe=e,l.de=!1,n.ge(t),n.P||!l.I||isNaN(l.I.duration)||(l.I.currentTime=e);var s=function(){n.G("seek",t),c&&n.play(t,!0)};if(c&&!n.P){var d=function(){n.se?setTimeout(d,0):s()};setTimeout(d,0)}else s()}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t.S(e);return!!n&&!n.q}for(var r=0;r<t.V.length;r++)if(!t.V[r].q)return!0;return!1},duration:function(e){var t=this,n=t.le,r=t.S(e);return r&&(n=t.re[r.re][1]/1e3),n},state:function(){return this.ae},unload:function(){for(var e=this,t=e.V,n=0;n<t.length;n++)t[n].q||e.stop(t[n].ve),e.P||(e._e(t[n].I),t[n].I.removeEventListener("error",t[n].Pe,!1),t[n].I.removeEventListener(i.C,t[n].ke,!1),i.K(t[n].I)),delete t[n].I,e.ge(t[n].ve);var r=i.A.indexOf(e);r>=0&&i.A.splice(r,1);var o=!0;for(n=0;n<i.A.length;n++)if(i.A[n].oe===e.oe||e.oe.indexOf(i.A[n].oe)>=0){o=!1;break}return a&&o&&delete a[e.oe],i.noAudio=!1,e.ae="unloaded",e.V=[],e=null,null},on:function(e,t,n,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var u=n===o[i].id;if(t===o[i].fn&&u||!t&&u){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var l=Object.keys(r);for(i=0;i<l.length;i++)0===l[i].indexOf("_on")&&Array.isArray(r[l[i]])&&(r[l[i]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},G:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r.me(e),r},me:function(e){var t=this;if(t.ce.length>0){var n=t.ce[0];n.event===e&&(t.ce.shift(),t.me()),e||n.action()}return t},de:function(e){var t=this,n=e.re;if(!t.P&&e.I&&!e.I.paused&&!e.I.ended&&e.I.currentTime<e.ye)return setTimeout(t.de.bind(t,e),100),t;var r=!(!e.J&&!t.re[n][2]);if(t.G("end",e.ve),!t.P&&r&&t.stop(e.ve,!0).play(e.ve),t.P&&r){t.G("play",e.ve),e.pe=e.we||0,e.Ae=0,e.be=i.ctx.currentTime;var o=1e3*(e.ye-e.we)/Math.abs(e.ne);t.fe[e.ve]=setTimeout(t.de.bind(t,e),o)}return t.P&&!r&&(e.q=!0,e.de=!0,e.pe=e.we||0,e.Ae=0,t.ge(e.ve),t.$e(e.I),i.D()),t.P||r||t.stop(e.ve,!0),t},ge:function(e){var t=this;if(t.fe[e]){if("function"!=typeof t.fe[e])clearTimeout(t.fe[e]);else{var n=t.S(e);n&&n.I&&n.I.removeEventListener("ended",t.fe[e],!1)}delete t.fe[e]}return t},S:function(e){for(var t=this,n=0;n<t.V.length;n++)if(e===t.V[n].ve)return t.V[n];return null},he:function(){var e=this;e.Se();for(var t=0;t<e.V.length;t++)if(e.V[t].de)return e.V[t].reset();return new l(e)},Se:function(){var e=this,t=e.ee,n=0,r=0;if(!(e.V.length<t)){for(r=0;r<e.V.length;r++)e.V[r].de&&n++;for(r=e.V.length-1;r>=0;r--){if(n<=t)return;e.V[r].de&&(e.P&&e.V[r].I&&e.V[r].I.disconnect(0),e.V.splice(r,1),n--)}}},k:function(e){if(void 0===e){for(var t=[],n=0;n<this.V.length;n++)t.push(this.V[n].ve);return t}return[e]},Me:function(e){return e.I.bufferSource=i.ctx.createBufferSource(),e.I.bufferSource.buffer=a[this.oe],e.Ie?e.I.bufferSource.connect(e.Ie):e.I.bufferSource.connect(e.I),e.I.bufferSource.loop=e.J,e.J&&(e.I.bufferSource.loopStart=e.we||0,e.I.bufferSource.loopEnd=e.ye||0),e.I.bufferSource.playbackRate.setValueAtTime(e.ne,i.ctx.currentTime),this},$e:function(e){var t=i.F&&i.F.vendor.indexOf("Apple")>=0;if(i.B&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=i.B}catch(e){}return e.bufferSource=null,this},_e:function(e){/MSIE |Trident\//.test(i.F&&i.F.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(e){this.De=e,this.init()};l.prototype={init:function(){var e=this,t=e.De;return e.$=t.$,e.J=t.J,e._=t._,e.ne=t.ne,e.pe=0,e.q=!0,e.de=!0,e.re="__default",e.ve=++i.t,t.V.push(e),e.create(),e},create:function(){var e=this,t=e.De,n=i.$||e.$||e.De.$?0:e._;return t.P?(e.I=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),e.I.gain.setValueAtTime(n,i.ctx.currentTime),e.I.paused=!0,e.I.connect(i.masterGain)):i.noAudio||(e.I=i._obtainHtml5Audio(),e.Pe=e.je.bind(e),e.I.addEventListener("error",e.Pe,!1),e.ke=e.Re.bind(e),e.I.addEventListener(i.C,e.ke,!1),e.I.src=t.oe,e.I.preload=!0===t.te?"auto":t.te,e.I.volume=n*i.volume(),e.I.load()),e},reset:function(){var e=this,t=e.De;return e.$=t.$,e.J=t.J,e._=t._,e.ne=t.ne,e.pe=0,e.Ae=0,e.q=!0,e.de=!0,e.re="__default",e.ve=++i.t,e},je:function(){var e=this;e.De.G("loaderror",e.ve,e.I.error?e.I.error.code:0),e.I.removeEventListener("error",e.Pe,!1)},Re:function(){var e=this,t=e.De;t.le=Math.ceil(10*e.I.duration)/10,0===Object.keys(t.re).length&&(t.re={__default:[0,1e3*t.le]}),"loaded"!==t.ae&&(t.ae="loaded",t.G("load"),t.me()),e.I.removeEventListener(i.C,e.ke,!1)}};var a={},f=function(e){var t=e.oe;if(a[t])return e.le=a[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);s(r.buffer,e)}else{var i=new XMLHttpRequest;i.open(e.ie.method,t,!0),i.withCredentials=e.ie.withCredentials,i.responseType="arraybuffer",e.ie.headers&&Object.keys(e.ie.headers).forEach((function(t){i.setRequestHeader(t,e.ie.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?s(i.response,e):e.G("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e.P&&(e.Z=!0,e.P=!1,e.V=[],delete a[t],e.load())},c(i)}},c=function(e){try{e.send()}catch(t){e.onerror()}},s=function(e,t){var n=function(){t.G("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t.V.length>0?(a[t.oe]=e,d(t,e)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(r).catch(n):i.ctx.decodeAudioData(e,r,n)},d=function(e,t){t&&!e.le&&(e.le=t.duration),0===Object.keys(e.re).length&&(e.re={__default:[0,1e3*e.le]}),"loaded"!==e.ae&&(e.ae="loaded",e.G("load"),e.me())},v=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(e){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i.F&&i.F.platform),t=i.F&&i.F.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(i.F&&i.F.userAgent.toLowerCase());i.F&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i.$?0:i._,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i.T()}};void 0!==(r=function(){return{Howler:i,Howl:u}}.apply(t,[]))&&(e.exports=r),t.Howler=i,t.Howl=u,void 0!==n.g?(n.g.HowlerGlobal=o,n.g.Howler=i,n.g.Howl=u,n.g.Sound=l):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=i,window.Howl=u,window.Sound=l)}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{parseScene:()=>Hn,setup:()=>Vn,stopGame:()=>qn,test_getData:()=>Xn,test_runFor:()=>Qn});const e=10,t=11,o=16,i=17,u=20,l=25,a=27,f=28,c=29,s=30,d=32,v=36,h=40,m=42,p=43,w=Math.PI,y=Math.min;Math.min;function M(e){return Math.sin(e)}function b(e){return Math.cos(e)}const g=Math.atan2,A=function(e){return Math.sqrt(e)},x=Math.random,$=Math.sin,_=Math.cos;function C(e){return e*w/180}const F="C_";function T(e,t){return R(e+t)}function P(e){if(0===e[0]&&0===e[1])return[1,0,0];{let r=(t=e[0],n=e[1],Math.sqrt(t*t+n*n));return[e[0]/r,e[1]/r,r]}var t,n}function k(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function S(e,t){return e[0]*t[0]+e[1]*t[1]}function I(e,t,n){let r=e*e;return D(3*r-2*(r*e),t,n)}function D(e,t,n){return t+e*(n-t)}function j(e,t,n){return Math.max(Math.min(e,n),t)}function R(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}function N(e){let t=e[3][1];if(2===e[3][0]){return[t/2,e[3][2]/2]}return[t,t]}const O=1080,B=1920,E=560,z=960;function L(e,t){return[e[0]+(Math.random()*t-t/2),e[1]+(Math.random()*t-t/2)]}function K(e){return window.Bento.currentTranslation[e]||""}function U(e,t,n,r){e[13][0]=t,e[13][1]=n,q(e,[u,a,0,d],r)}function G(e){for(;e>=2*Math.PI;)e-=2*Math.PI;for(;e<0;)e+=2*Math.PI;return e}function V(e,t,n){e[14]=G(t),q(e,[u,a,o,0,d],n)}function q(e,t,n){if(e&&e.d){for(let n of t)e.d[n]=!0;for(let r of e.b)q(n[r],t,n)}}function H(e){return e.d[0]&&(e.d[0]=!1,e[0]=e.c?re(W(e.c),e[13],1):e[13]),e[0]}function Q(e){var t;return e.d[17]&&(e.d[17]=!1,e[17]=e.c?e[15]*((t=W(e.c))[0]*t[0]+t[3]*t[3]):e[15]),e[17]}function X(e){return e[33]?e.c?e[33][0]+X(e.c):e[33][0]:0}function Y(e){return e.d[16]&&(e.d[16]=!1,e[16]=e.c?G(e[14]+Y(e.c)):e[14]),e[16]}function W(e){return e.d[20]&&(e.d[20]=!1,e[20]=e.c?oe(W(e.c),te(e)):te(e)),e[20]}function Z(e){return e[31]?W(e):(e.d[27]&&(e.d[27]=!1,e[27]=e.c?oe(Z(e.c),J(e)):J(e)),e[27])}function J(e){let t,n,r=0;e.f[1]&&(e.f[1][0]-=.125,[r,t,n]=e.f[1]);let[o,i,u]=P(e[1]),l=0,a=0;u=ee(u);let f=1/Math.sqrt(u);if(r>0){let c=Math.abs(1-r);c*=c,[o,i]=t;let s=N(e),d=2*(Math.abs(s[0]*o)+Math.abs(s[1]*i)),v=2*(Math.abs(s[1]*o)+Math.abs(s[0]*i));u=ee(n)-.56,u<0&&(u=0);let h=u/2;u=1-h+h*c;let m=0;e[4]&&(m=e[4][1]),f=1/Math.sqrt(u),u=125*(u-1)/d+1,f=125*(f-1)/v+1,u<.95&&(l=-1*o*m*(1-u),a=-1*i*m*(1-u))}let[c,s,d]=function(e,t,n,r){let o=e*e,i=t*t;return[(n-1)*o+(r-1)*i,e*t*(n-1-(r-1)),(n-1)*i+(r-1)*o]}(o,i,u,f);u<1&&r<=0&&(c=s=d=0);let v=te(e);return[v[0]+c,v[1]+s,v[2]+l,v[3]+s,v[4]+d,v[5]+a]}function ee(e){return e=I(Math.min(e/32,1),.4,1.36)}function te(e){let t=e[13],n=e[14],r=e[15],o=_(n),i=$(n);return[o*r,-i*r,t[0],i*r,o*r,t[1]]}function ne(e){let t=-1*e[14],n=1/e[15],r=Math.cos(t),o=Math.sin(t),i=r*n,u=-o*n,l=o*n,a=r*n;return[i,u,-(i*e[13][0]+u*e[13][1]),l,a,-(l*e[13][0]+a*e[13][1])]}function re(e,t,n){let r=e[0],o=e[1],i=e[2],u=e[3],l=e[4],a=e[5];return[r*t[0]+o*t[1]+i*n,u*t[0]+l*t[1]+a*n]}function oe(e,t){let n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],a=t[0],f=t[1],c=t[2],s=t[3],d=t[4],v=t[5];return[n*a+r*s,n*f+r*d,n*c+r*v+o,i*a+u*s,i*f+u*d,i*c+u*v+l]}function ie(e){let t=e.Ne();return t.d[32]&&(t.d[32]=!1,t[32]=ne(t)),t[32]}let ue=0;function le(e,t,n,r,o,i,u,l,a,f){let c=32;c*=Math.min(u[0]/30,6)*a;let s=new ae(t,0,c,n,u,f=f||[0,0],5,l,[i],1,r,o);return e.push(s),s}class ae{constructor(e,t,n,r,o,i,u,l,a,f,c,s){this.Oe=e,this.Be=Date.now()+ ++ue,this.Ee=0,this.ze={Le:t,Ke:n,Ue:r,Ge:o,Ve:i,qe:u,He:l,Qe:a,Xe:f,Ye:c,We:s}}update(e){return this.Ee+=e,this.Ee<=this.ze.He}draw(e,t){let n=R(this.Be),r=this.Ee;t.setupParticleRender(e,1===this.ze.Le?"source-over":"screen"),0===this.ze.Le?this.fireworkParticle(e,t,n,r):1===this.ze.Le?this.impactParticle(e,t,n,r):2===this.ze.Le&&this.confettiParticle(e,t,n,r),t.endParticleRender(e)}fireworkParticle(e,t,n,r){for(let o=0;o<this.ze.Ke;++o){let o=(1+n())/2*this.ze.He,i=r-n()*this.ze.qe,u=2*n()*Math.PI,l=[this.ze.Ge[0]*(n()-.5),this.ze.Ge[1]*(n()-.5)],a=.15*n()*this.ze.Xe;if(i<0||i>o)continue;let f=[Math.cos(u),Math.sin(u)];f[0]*=a*this.ze.Ge[0],f[1]*=a*this.ze.Ge[1];let c=this.ze.Ue[0]+l[0]+ +f[0]*i,s=this.ze.Ue[1]+l[1]+ +f[1]*i+.025*i*i,d=I((o-i)/o,0,1);t.renderParticle(e,c,s,20*d,this.ze.Qe[0],d)}}impactParticle(e,t,n,r){let o=[this.ze.Ve[1],-this.ze.Ve[0]],i=this.ze.Ve;for(let u=0;u<this.ze.Ke;++u){let u=(1+n())/2*this.ze.He,l=r-n()*this.ze.qe,a=n()>.5?n()/2+.5:-n()/2-.5,f=(n()-.5)*this.ze.Xe,c=(.25+n())/1.25*25;if(l<0||l>u)continue;let s=Math.sqrt(this.ze.Ge[0])/7.5,d=Math.sqrt(this.ze.Ge[1])/7.5,v=[o[0]*a*s+i[0]*f,o[1]*a*d+i[1]*f];v[0]*=c,v[1]*=c;let h=this.ze.Ue[0]+v[0]*Math.log(2*l+1),m=this.ze.Ue[1]+v[1]*Math.log(2*l+1)+-.025*l*l+7,p=I((u-l)/u,0,1);p*=c/25,t.renderParticle(e,h,m,20*p,this.ze.Qe[0],p)}}confettiParticle(e,t,n,r){t.disableCameraTransform(e);for(let o=0;o<this.ze.Ke;++o){let o=(1+n())/2*this.ze.He,i=r-n()*this.ze.qe,u=n()*this.ze.Ge[0],l=Math.floor(n()*this.ze.Qe.length),a=n()-.5,f=2*n();if(i<0||i>o)continue;let c=[5*a,.5];c[1]*=this.ze.Ge[1];let s=this.ze.Ue[0]+u+c[0]*i,d=this.ze.Ue[1]+c[1]*i+-.05*i*i*f,v=I((o-i)/o,0,1);t.renderParticle(e,s,d,14*v,this.ze.Qe[l],.5*v)}t.setupParticleRender(e)}}let fe={};const ce={makeRenderState:function(e,t,n){let r={};r.Ze=e,r.Je=n;let o=n.getContext(e);r.et=o,r.tt=["#000"],r.nt=[1080,1920],r.rt={},r.ot=[],r.it=1,r.lt=[],r.at=!1,r.lt.push([{uid:-1,RENDER_TRAILS:[0]},"RENDER_TRAILS"]),r.ft={ct:r.et.beginPath.bind(r.et),st:r.et.arc.bind(r.et),dt:r.et.rect.bind(r.et),vt:r.et.moveTo.bind(r.et),ht:r.et.lineTo.bind(r.et),wt:r.et.fill.bind(r.et),yt:r.et.fillText.bind(r.et),Mt:r.et.fillRect.bind(r.et),bt:r.et.stroke.bind(r.et),gt:r.et.strokeText.bind(r.et),At:r.et.createRadialGradient.bind(r.et),xt:r.et.setTransform.bind(r.et),$t:(e,t,n,o)=>{r.et.shadowColor=e,r.et.shadowOffsetX=t,r.et.shadowOffsetY=n,r.et.shadowBlur=o},_t:()=>{r.et.fill(),r.et.stroke()},Ct:r.et.clip.bind(r.et),Ft:r.et.drawImage.bind(r.et),Tt:r.et.save.bind(r.et),Pt:r.et.restore.bind(r.et)},de(o),se=o.createRadialGradient(e.width/2,e.height/2-75,1.1*(e.width+e.height)/4,e.width/2,e.height/2-75,Math.sqrt(e.width*e.width/4+e.height*e.height/4)),se.addColorStop(0,"rgba(0,2,81,0)"),se.addColorStop(.12,"rgba(0,2,81,0.01)"),se.addColorStop(.62,"rgba(0,2,81,0.14)"),se.addColorStop(1,"rgba(0,2,81,0.37)"),t.l&&(r.tt=t.l.map((e=>"#"+e)));return r},getContext:function(e){let t=e.getContext("2d",{alpha:!0});if(!t)throw console.error("This is very bad"),{};return t},setupCanvas:de,setColors:function(e,t){e.kt.tt=t},rendererSetSize:function(e,[t,n]){e.kt.Ze.width=t,e.kt.Ze.height=n,e.kt.it=t/1080,de(e.kt.et)},renderScene:function(t,n,r,o,i,u){t.kt.ft.xt(1,0,0,1,0,0),t.kt.et.clearRect(0,0,t.kt.Ze.width,t.kt.Ze.height),t.kt.et.fillStyle=se,t.kt.et.fillRect(0,0,t.kt.Ze.width,t.kt.Ze.height),n&&(n=!1,r.sort(((e,t)=>e[0][e[1]][0]-t[0][t[1]][0])));he(t);for(let[n,i]of r){if(-1===n.uid)continue;let[r,u,l,a,f,c]=n[41]?Z(n):oe(ie(Wt(t)),Z(n));switch(t.kt.ft.xt(r*t.kt.it,a*t.kt.it,u*t.kt.it,f*t.kt.it,(l+540)*t.kt.it,(c+960)*t.kt.it),n[9]&&(t.kt.et.globalAlpha=n[9][0]),i){case 4:pe(t,[0,0],n[4]);break;case 5:we(t,[0,0],n[5]);break;case e:me(t,[0,0],n[10]);break;case s:let r=o[n[30][0]],i=n[30][1];ye(t,[0,0],i,r)}n[9]&&(t.kt.et.globalAlpha=1)}(function(e,t,n,r){for(let o=n.length-1;o>=0;--o){let i=n[o];i.update(r)?i.draw(e,t):n.splice(o,1)}})(t,t.kt.Je,u.filter((e=>e.Oe)),i),t.kt.ft.xt(t.kt.it,0,0,t.kt.it,540*t.kt.it,960*t.kt.it);for(let e=t.kt.ot.length-1;e>=0;--e){let n=t.kt.ot[e];t.kt.et.globalAlpha=Math.min((180-n.time)/60,1),t.kt.et.fillStyle="#000000",me(t,[5,1*n.time-955],[0,72,"#ffffff",n.text]),t.kt.et.fillStyle="#ffffff",me(t,[0,1*n.time-960],[0,72,"#ffffff",n.text]),n.time+=2,n.time>180&&t.kt.ot.splice(e,1)}t.kt.et.globalAlpha=1},addNotification:function(e,t){e.kt.ot.push({text:t,time:0})},setupParticleRender:function(e,t){let[n,r,o,i,u,l]=ie(Wt(e));e.kt.ft.xt(n*e.kt.it,i*e.kt.it,r*e.kt.it,u*e.kt.it,(o+540)*e.kt.it,(l+960)*e.kt.it),window.wireframeMode&&e.kt.ft.$t("rgba(0,0,0,0)",0,0,0);e.kt.et.globalCompositeOperation=t},renderParticle:function(e,t,n,r,o,i){e.kt.et.fillStyle=o,e.kt.et.globalAlpha=i,Me(e,t,n,r).wt()},endParticleRender:function(e){e.kt.et.globalCompositeOperation="source-over",he(e)},disableCameraTransform:function(e){e.kt.ft.xt(e.kt.it,0,0,e.kt.it,540*e.kt.it,960*e.kt.it)}};let se;function de(e){e.textAlign="center",e.textBaseline="middle",e.lineCap="round",e.lineJoin="round"}let ve=e=>{};function he(e){window.wireframeMode?(e.kt.et.strokeStyle="#ffffff",e.kt.et.lineWidth=5,e.kt.et.fillStyle=e.kt.tt[0],ve=t=>{e.kt.ft.$t(e.kt.tt[t],0,0,15)}):(e.kt.et.strokeStyle="rgba(0,0,0,0)",ve=t=>{e.kt.et.fillStyle=e.kt.tt[t]}),e.kt.et.globalAlpha=1}function me(e,[t,n],[r,o,i,u,l,a]){a&&(e.kt.et.textAlign="left"),e.kt.et.font="bold "+o+"px Poppins,sans-serif",ve(i),window.wireframeMode&&(e.kt.et.fillStyle="#ffffff"),l&&(e.kt.et.lineWidth=12,e.kt.et.strokeStyle=l,e.kt.ft.gt(u,t,n),e.kt.et.strokeStyle="rgba(0,0,0,0)"),e.kt.ft.yt(u,t,n),window.wireframeMode&&he(e),a&&(e.kt.et.textAlign="center")}function pe(e,[t,n],[r,o,i,u]){if(u){let r=fe[u];if(r){if(r.loaded)return void be(e,r.img,t,n,2*o,2*o)}else{var l=new Image;l.src="./"+u,fe[u]={loaded:!1,img:l},l.addEventListener("load",(function(){fe[u].loaded=!0}),!1)}}ve(i),Me(e,t,n,o)._t()}function we(e,[t,n],[r,o,i,u,l]){if(l){let r=fe[l];if(r){if(r.loaded)return void be(e,r.img,t,n,o,i)}else{var a=new Image;a.src="./"+l,fe[l]={loaded:!1,img:a},a.addEventListener("load",(function(){fe[l].loaded=!0}),!1)}}ve(u),function(e,t,n,r,o){return e.kt.ft.ct(),e.kt.ft.dt(t-r/2,n-o/2,r,o),e.kt.ft}(e,t,n,o,i)._t()}function ye(e,[t,n],r,[o,i]){e.kt.ft.ct(),e.kt.ft.vt(t,n),e.kt.ft.ht(o*(r?-1:1),i*(r?-1:1)),e.kt.et.strokeStyle="#FDF6BF",e.kt.et.lineWidth=5,e.kt.ft.bt(),he(e)}function Me(e,t,n,r){return e.kt.ft.ct(),e.kt.ft.st(t,n,r,0,2*Math.PI),e.kt.ft}function be(e,t,n,r,o,i){return e.kt.ft.Ft(t,n-o/2,r-i/2,o,i),e.kt.ft}function ge(e){e.St={},e.It=0,e.Dt=0,e.jt={},e.Rt={},e.Nt=0,e.Ot=[],e.Bt=[],e.Et=[],e.zt=[],e.Lt=0,e.Kt=[0,[]],e.Ut={},e.Gt=[[0,0]],e.Vt=1,e.qt=1,e.Ht=()=>0,e.rt={},e.Qt=0,e.Xt=-1,e.Yt=!1,e.Wt=0,e.Zt=!1,e.Jt=[0,0,0],e.en=[],e.tn=[],e.nn={},e.rn={index:0,completed:0},e.ln=0,e.an={},e.cn=[],e.sn=e.sn||[],e.dn=[]}function Ae(e,t,n,r){for(ge(e),e.St=t,e.dn.length<1&&(e.dn=e.St.h.map((e=>e.split("_").map((e=>"#"+t.l[e])).join("_")))),e.Qt=n||0,e.vn=r&&r[2]||null,e.hn=r&&r[3]||null,e.mn=t.s.gs,e.pn=t.s.ls,e.Jt=[e.pn[e.Qt].offsetX||0,-1*(e.pn[e.Qt].offsetY||0),e.pn[e.Qt].offsetZ||0],e.mn.dynLevels&&(e.nn=function(e){let t={};for(let n=0;n<e.pn.length;++n){let r=e.pn[n].spawnList;if(!r)continue;let o=[],i=r.split(",");for(let e of i){let t={times:1,choices:[],weightSum:0},n=1,r=0,i=e.indexOf("}");i>0&&(n=parseInt(e.substring(1,i)),t.times=n,r=i+1);let u=e.substring(r).split("|");for(let e of u){let n=e.split("x"),r=parseInt(n[0])-1,o=n[1]?parseInt(n[1]):1;t.choices.push([r,o]),t.weightSum+=o}o.push(t)}t[n]=o}return t}(e));e.sn.length<e.St.a.length;)e.sn.push([]);let o=Date.now();e.Kt=[o,[]],r&&(e.Kt[0]=r[0]),e.Ht=R(e.Kt[0]);for(let n of Object.keys(t.o)){e.jt[n]={length:0,collidesWith:[],array:[],totalOccurances:0};let r=t.o[n][3];r&&(e.an[r]||(e.an[r]=[]),e.an[r].push(n)),e.an[n]=[n]}for(let n of t.c)e.jt[n[0]].collidesWith.push(n[1]);for(let t=0;t<18;++t)e.Ot.push([])}const xe=[],$e={aa:3,ab:2,ac:1,ad:1},_e={ue:(e,t,n)=>{e.uniformMatrix4fv(t,!1,n)},uf:(e,t,n)=>{e.uniformMatrix4fv(t,!1,n)},ug:(e,t,n)=>{e.uniformMatrix4fv(t,!1,n)},uh:(e,t,n)=>{e.uniform3fv(t,n)},ui:(e,t,n)=>{e.uniform3fv(t,n)},uj:(e,t,n)=>{e.uniform1i(t,n)},uk:(e,t,n)=>{e.uniform1i(t,n)},ul:(e,t,n)=>{e.uniform1f(t,n)},um:(e,t,n)=>{e.uniform2fv(t,n)},un:(e,t,n)=>{e.uniform2fv(t,n)},uo:(e,t,n)=>{e.uniform3fv(t,n)},up:(e,t,n)=>{e.uniform3fv(t,n)},uq:(e,t,n)=>{e.uniformMatrix3fv(t,!1,n)},ur:(e,t,n)=>{e.uniform1f(t,n)},us:(e,t,n)=>{e.uniform1f(t,n)},ut:(e,t,n)=>{e.uniform4fv(t,n)},uu:(e,t,n)=>{e.uniform1f(t,n)},uv:(e,t,n)=>{e.uniform1f(t,n)},uw:(e,t,n)=>{e.uniform3fv(t,n)},ux:(e,t,n)=>{e.uniform1f(t,n)},uy:(e,t,n)=>{e.uniform3fv(t,n)},uz:(e,t,n)=>{e.uniform1f(t,n)}},Ce="\nprecision mediump float;\nvarying vec2 vTexCoord;\nvarying vec3 vTexDecalPos;\n\nuniform vec4 ut;\nuniform sampler2D uj;\nuniform sampler2D uk;\nuniform float ul;\nuniform vec2 um;\nuniform vec2 un;\n\nconst float PI = 3.14159;\n\nuniform mediump vec3 uh;\n\nuniform vec3 uo;\nuniform vec3 up;\n\n\nvoid main() {\n\n  float x = gl_FragCoord.x/1079.5;\n  float y = gl_FragCoord.y/1919.5;\n  float a = PI / 6.0;\n  \n  \n  float div = mix(1.125, 1.42, x);\n  vec3 fogColor = mix( uo, up, (sin(a) * x + cos(a) * y)/(div) );\n  float depth = max(0.1,gl_FragCoord.z - 0.75);\n  float fogAmount = (depth * depth * depth) * 64.0;\n\n\n  vec4 tex = texture2D(uj, un * (vTexCoord + um));\n  vec4 decalTex = texture2D(uk, vec2(vTexDecalPos.x + ul, vTexDecalPos.y + vTexDecalPos.z + ul) - 2.0 * um * uh.xy );\n\n\n  gl_FragColor = vec4(mix(decalTex.rgb * tex.rgb * ut.rgb *1.1-0.05, fogColor, fogAmount), tex.a * ut.a);\n}\n";xe[0]={v:"\nprecision mediump float;\nattribute vec3 aa;\nattribute vec2 ab;\n\nuniform mat4 ue;\nuniform mat4 uf;\nuniform mat4 ug;\n\nuniform mediump vec3 uh;\n\nuniform mediump vec3 ui;\n\nvarying mediump vec2 vTexCoord;\nvarying mediump vec3 vTexDecalPos;\n\nvoid main() {\n  vTexCoord = ab;\n  vTexDecalPos = aa.xyz * uh;\n  float vertexWeight = aa.z * 0.5 + 0.5;\n  vec4 offset = vertexWeight * vec4(ui, 0.0);\n  vec4 vPos =  offset + ug * vec4(aa, 1);\n  gl_Position = ue * uf * vPos;\n}\n",f:Ce,a:["aa","ab"],u:["ue","uf","ug","uh","ui","ut","uj","uk","ul","um","un","uo","up"]};xe[2]={v:"\nattribute vec3 aa;\nattribute vec2 ab;\nattribute float ac;\n\nuniform mat4 ue;\nuniform mat4 uf;\nuniform mat4 ug;\n\nuniform mediump vec3 uh;\n\nuniform mediump vec3 ui;\n\nvarying mediump vec2 vTexCoord;\nvarying mediump vec3 vTexDecalPos;\n\nvoid main() {\n  vTexCoord = ab;\n  vTexDecalPos = aa.xyz * uh;\n  vec4 offset = ac * vec4(ui, 0.0);\n  vec4 vPos =  offset + ug * vec4(aa, 1);\n  gl_Position = ue * uf * vPos;\n}\n",f:Ce,a:["aa","ab","ac"],u:["ue","uf","ug","uh","ui","ut","uj","uk","ul","um","un","uh","uo","up"]};xe[1]={v:"\nattribute vec3 aa;\nattribute vec2 ab;\nattribute float ad;\n\nuniform mat4 ue;\nuniform mat4 uf;\nuniform mat4 ug;\n\nuniform mat3 uq;\n\nuniform mediump float ur;\nuniform mediump float us;\n\nuniform mediump vec4 ut;\n\nuniform mediump float uu;\nuniform mediump float uv;\nuniform mediump float ux; \nuniform mediump vec3 uw;\nuniform mediump vec3 uy;\nuniform mediump float uz;\n\nconst float PI = 3.14159;\n\nvarying mediump vec4 vColor;\nvarying mediump vec2 vTexCoord;\n\n\n\nfloat random( float x ) { return fract(sin(x*12.7)*6543.7); }\n\nvoid main() {\n  float seed = us + ad;\n\n  float life = (1.0+random(seed))/2.0 * uu;\n  seed += 100.0;\n  float t = ur;\n  seed += 100.0;\n  float dirU = random(seed) * 2.0 * PI;\n  seed += 100.0;\n  float dirV = random(seed) * 2.0 * PI;\n  seed += 100.0;\n  float speed = (random(seed) + 0.25) * ux;\n  seed += 100.0;\n  vec3 start = uw * vec3(2.0*random(seed)-1.0, 2.0*random(seed+100.0)-1.0, 2.0*random(seed+200.0)-1.0);\n\n  \n\n  float alpha = smoothstep(0.0, 1.0, (life - t) / life);\n\n  vec3 vel = uq * vec3( cos(dirV)*cos(dirU), cos(dirV)*sin(dirU), sin(dirV));\n\n  vec3 nVel = normalize(vel);\n  vel *= mix(1.0, uz, max(0.0,-1.0*(-0.1+dot(nVel,uy))));\n\n  vec3 pos = vel * (speed * t) + vec3(start.x, start.y, start.z);\n\n\n  vColor = vec4(ut.xyz, ut.a * alpha);\n  vTexCoord = ab;\n  gl_Position = ue * (uf * ug * vec4(pos, 1) + vec4(aa.xy*min(0.7,alpha),0, 0.005));\n}\n",f:"\nprecision mediump float;\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord;\n\nuniform sampler2D uj;\n\nvoid main() {\n  gl_FragColor = vec4(vColor.rgb, vColor.a*texture2D(uj, vTexCoord).a);\n}\n",a:["aa","ab","ad"],u:["ue","uf","ug","uq","ur","us","ut","uu","uv","uw","ux","uy","uz","uj"]};let Fe={wn:0,yn:"",Mn:[],bn:[null,null],gn:[]};function Te(e,t){let n=xe[t],r=function(e,t,n){var r=Pe(e,e.VERTEX_SHADER,t),o=Pe(e,e.FRAGMENT_SHADER,n);if(!r||!o)return;var i=e.createProgram();if(e.attachShader(i,r),e.attachShader(i,o),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS)){var u=e.getProgramInfoLog(i);return void console.error(u)}return e.detachShader(i,r),e.detachShader(i,o),e.deleteShader(r),e.deleteShader(o),i}(e,n.v,n.f);e.useProgram(r),Fe.gn[t]={},Fe.Mn[t]={};for(let o of n.a)Fe.gn[t][o]=e.getAttribLocation(r,o);for(let o of n.u)Fe.gn[t][o]=e.getUniformLocation(r,o),Fe.Mn[t][o]=null;return r}function Pe(e,t,n){let r=e.createShader(t);if(!r)return console.error("Could not create shader handle"),null;e.shaderSource(r,n),e.compileShader(r);var o=e.getShaderInfoLog(r);return o&&o.length>0&&console.error(o),r}function ke(e,t,n){for(let t of xe[Fe.wn].a)e.disableVertexAttribArray(Fe.gn[Fe.wn][t]);let r=xe[t],o=n[t];e.useProgram(o),Fe.bn=[null,null];for(let n of r.a)e.enableVertexAttribArray(Fe.gn[t][n]);Fe.wn=t}function Se(e,t,n,r){let o=Fe.wn;null!==Fe.Mn[o][t]&&Fe.Mn[o][t]===n||(Fe.Mn[o][t]=n,_e[t](e,Fe.gn[o][t],r))}function Ie(e,t,n,r){null!==Fe.bn[t]&&Fe.bn[t]===n||(Fe.bn[t]=n,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,r),0===t?Se(e,"uj",0,0):Se(e,"uk",1,1))}function De(){Fe.yn=""}function je(e,t,n){if(n&&Fe.yn!==t){for(let t of xe[Fe.wn].a){let r=$e[t]||3,o=null;switch(t){case"aa":o=n.pos;break;case"ab":o=n.texCoord;break;case"ac":o=n.weights;break;case"ad":o=n.particleBuffer}e.bindBuffer(e.ARRAY_BUFFER,o),e.vertexAttribPointer(Fe.gn[Fe.wn][t],r,e.FLOAT,!1,0,0)}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.index),Fe.yn=t}}function Re(e,t){e.drawElements(e.TRIANGLES,t[Fe.yn].triCount,e.UNSIGNED_SHORT,0)}const Ne="./ModelsB/";let Oe={},Be=1;const Ee=new Float32Array([0,0,0]),ze=new Float32Array([0,0]),Le=new Float32Array([1,1]);let Ke,Ue,Ge,Ve=[];let qe,He={},Qe=0;const Xe="ST_SQ";let Ye={},We={};const Ze={makeRenderState:function(e,t,n){let r={};r.Ze=e,r.Je=n;let o=n.getContext(e);r.An=o,r.tt=["#000"],r.nt=[1080,1920],r.rt={},r.ot=[],r.it=1,r.xn=[],r.$n=!1,r._n=[],r.Cn=!1,t.l&&(r.tt=t.l.map((e=>"#"+e)));return r},getContext:function(e){let t=e.getContext("webgl");if(!t)throw console.error("This is very bad"),{};return tt=!0,Ve[1]=Te(t,1),Ve[2]=Te(t,2),Ve[0]=Te(t,0),ke(t,0,Ve),Ke=document.createElement("canvas"),Ue=Ke.getContext("2d"),Je(t,"Cube",Mt),Je(t,"Plane",bt),Je(t,"UpPlane",gt),Je(t,"ParticleSystem",At),t.enable(t.CULL_FACE),t},setupCanvas:et,setColors:function(e,t){e.Fn.tt=t},rendererSetSize:function(e,[t,n]){e.Fn.Ze.width=t,e.Fn.Ze.height=n,et(e.Fn.An,e.Fn.Ze,e.jt.C_.array[0][34])},renderScene:function(e,t,n,r,o,i){tt&&(et(e.Fn.An,e.Fn.Ze,e.jt.C_.array[0][34]),tt=!1);Qe+=.045;let u=e.Fn.An;u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);let l=e.jt.C_.array[0].f[3];if(l&&l[3]<l[2]){l[3]++;let e=l[0],t=l[1],n=[[],[]],r=l[3]/l[2];for(let o=0;o<3;++o)n[0][o]=D(r,e[0][o],t[0][o]),n[1][o]=D(r,e[1][o],t[1][o]);ke(u,0,Ve),Se(u,"uo",null,new Float32Array(n[0].slice(0,3))),Se(u,"up",null,new Float32Array(n[1].slice(0,3)))}e.Fn.$n&&(e.Fn.$n=!1,e.Fn.xn.sort(((e,t)=>e[0][e[1]][0]-t[0][t[1]][0])));e.Fn.Cn&&(e.Fn.Cn=!1,e.Fn._n.sort(((e,t)=>e[0][e[1]][0]-t[0][t[1]][0])));nt(u,!1),u.depthMask(!0);for(let t,n=0;t=e.Fn.xn[n++];)if(t[1]===s){let n=r[t[0][30][0]];if(n){let r=t[0][30][1];ot(e,u,t[0],r,n)}}else it(e,u,t[0],t[1]);u.depthRange(1,1),ut(u,"UpPlane","",[0,0,0,1],null,!1,5,5,5,0,new Float32Array([5,0,0,0,0,1,0,0,0,0,5,0,0,0,-7.5,1]),null),u.depthRange(0,1),u.depthMask(!1);for(let t,n=0;t=e.Fn.xn[n++];)rt(e,u,t[0],t[1]);for(let t,n=0;t=e.Fn._n[n++];)it(e,u,t[0],t[1]);let a=i.filter((e=>!e.Oe));for(let t=a.length-1;t>=0;--t){let n=a[t];if(n.update(o)){ke(u,1,Ve);let t=at(n.ze.Qe[0]);t[3]=.75;let r=1===n.ze.Le,o=r||n.ze.Ve[0]||n.ze.Ve[1],i=r?0:10;Se(u,"ut",null,new Float32Array(t)),Se(u,"uu",null,n.ze.He),Se(u,"uv",null,n.ze.qe),Se(u,"uw",null,new Float32Array(r?Ee:[n.ze.Ge[0],n.ze.Ge[1],n.ze.We/2*Be])),Se(u,"ux",null,r?5/7.5:.48),Se(u,"uy",null,new Float32Array([n.ze.Ve[0],n.ze.Ve[1],0])),Se(u,"uz",null,o?i:1);let l=Math.sqrt(n.ze.Ge[0])*n.ze.Xe,a=Math.sqrt(n.ze.Ge[1])*n.ze.Xe;je(u,"ParticleSystem",Oe.ParticleSystem);let[f,c]=n.ze.Ue,[s,d,v,h,m,p]=oe(ie(Wt(e)),[1,0,f,0,1,c]),w=new Float32Array([1*s/Be,1*d/Be,0,0,1*h/Be,1*m/Be,0,0,0,0,1/Be,0,v/Be,-p/Be,0,1]);w[14]=-7+n.ze.Ye-Wt(e).Ne()[33][0],Se(u,"ur",null,n.Ee),Se(u,"us",null,n.Be%100),Se(u,"ug",null,w),Se(u,"uq",null,new Float32Array([l,0,0,0,a,0,0,0,(l+a)/4]));let y="PT";He[y]||(He[y]=vt(u,!1,!0)),Ie(u,0,y,He[y]),nt(u,1!==n.ze.Le),Re(u,Oe)}else a.splice(t,1)}return},addNotification:()=>{},setupParticleRender:()=>{},renderParticle:()=>{},endParticleRender:()=>{},disableCameraTransform:()=>{}};function Je(e,t,n){let r=lt(e,n.vertices),o=n.pNum?lt(e,n.pNum):null,i=lt(e,n.texCoords);const u=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n.indices),e.STATIC_DRAW),Oe[t]={pos:r,texCoord:i,index:u,particleBuffer:o,triCount:n.indices.length},De()}function et(e,t,n){let r={x:n[0],y:n[1],z:n[2],xR:n[3],fN:n[4],fF:n[5],fc1:n[6],fc2:n[7]},o=r.fF,i=function(e,t,n,r){let o=new Float32Array(16),i=1/Math.tan(e/2);o[0]=i/t,o[5]=i,o[11]=-1;let u=1/(n-r);return o[10]=(r+n)*u,o[14]=2*r*n*u,o}(45*Math.PI/180,t.clientWidth/t.clientHeight,1.5,o);Be=z/(7/i[5]);for(let t of[0,1,2]){ke(e,t,Ve),Se(e,"ue",null,new Float32Array(i));let n=Math.cos(r.xR*Math.PI/180),o=Math.sin(r.xR*Math.PI/180);Se(e,"uf",null,new Float32Array([1,0,0,0,0,n,-o,0,0,o,n,0,r.x,r.y,r.z,1]))}e.clearColor(0,0,0,0),nt(e,!1),e.enable(e.BLEND),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight);let u=at(r.fc1),l=at(r.fc2);for(let t of[0,2])ke(e,t,Ve),Se(e,"uo",null,new Float32Array(u.slice(0,3))),Se(e,"up",null,new Float32Array(l.slice(0,3)));ke(e,0,Ve),Ge=dt(e,1,1,1,1),qe=function(e){let t=64,n=t,r=!1,o=[];for(let e=0;e<n;++e)for(let e=0;e<t/2;++e){let e=x();e>.05?(e=.92,r=!1):(e=1,r=!0);let[t,n,i,u]=[e,e,e,1];t*=255,n*=255,i*=255,u=255,o.push(t,n,i,u,t,n,i,u)}return st(e,o,t,n,e.REPEAT,e.NEAREST)}(e)}let tt=!0;function nt(e,t){t?e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA):e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)}function rt(t,n,r,o){let i=r[33][4]||0;if(1===i)return;if(void 0===r[33][2])return;if("UpPlane"===r[33][2])return;if("None"===r[33][2])return;if(""===r[33][2])return;switch(o){case e:let[t,n,o,i]=r[10];if(""===i)return}let u=X(r),l=.5*r[33][1]||.1;u+=.01-l;let a=0===i?"ST":Xe,[f,c]=N(r);f=1.2*f+18,c=1.2*c+18,f/=Be,c/=Be;let s=[0,0,0,.45],[d,v,h,m,p,w]=oe(ie(Wt(t)),Z(r)),y=new Float32Array([d*f,v*f,0,0,m*c,p*c,0,0,0,0,l,0,0,0,0,1]);y[12]=h/Be,y[13]=-w/Be,y[14]=-7+u-Wt(t).Ne()[33][0];ut(n,"Plane",a,s,null,!0,f,c,l,r.drawId,y,null)}function ot(e,t,n,r,o){r&&(o[0]*=-1,o[1]*=-1);let i=X(n),u=Nt(P(o)[2]),l=200*u;l+=l>5?50:10*l;let a=l/2/Be,f=10/Be,c=[1,1-u,Math.max(0,1-3*u),1],s=Math.atan2(o[1],o[0]),d=Math.cos(s),v=Math.sin(s),[h,m,p,w,y,M]=ie(Wt(e)),b=H(n);p+=b[0],M+=b[1],p+=l/2*d,M+=l/2*v;let g=new Float32Array([a*d,a*-v,0,0,f*v,f*d,0,0,0,0,.025,0,0,0,0,1]);g[12]=p/Be,g[13]=-M/Be,g[14]=-7+i-Wt(e).Ne()[33][0];ut(t,"Cube","",c,null,!0,a,f,.025,n.drawId,g,null)}function it(t,n,r,o){let i=X(r),u=.5*r[33][1]||.1;if(void 0===r[33][2]||""===r[33][2]||"None"===r[33][2])return;let l=r[33][2]||"Cube",a=r[33][7]||"",f=r[33][5]||!1,c=r[33][6]||!1,[s,d]=N(r);s/=Be,d/=Be;let v=r[33][3],h=null,m=[0,0,0,1];switch(o){case 4:m=at(t.Fn.tt[r[4][2]]);break;case 5:m=at(t.Fn.tt[r[5][3]]);break;case e:let[o,i,u,l]=r[10];if(""===l)return;let a=t.Fn.tt[u];m=at(a);let f="t"+i+"_"+l+"_"+a;He[f]||(He[f]=function(e,t,n,r,o,i,u){r.font="bold "+i+"px Poppins,sans-serif";let l=r.measureText(o);return n.width=l.width,n.height=1.05*i,r.font="bold "+i+"px Poppins,sans-serif",r.textAlign="center",r.textBaseline="middle",r.lineCap="round",r.lineJoin="round",r.clearRect(0,0,n.width,n.height),r.fillStyle=u,r.fillText(o,n.width/2,n.height/2),{texture:ft(e,n),width:l.width}}(n,0,Ke,Ue,l,i,a)),h=He[f].texture,s=He[f].width/(2*Be),d=i/(2*Be)}let[p,w,y,M,b,g]=oe(ie(Wt(t)),Z(r)),A=new Float32Array([p*s,w*s,0,0,M*d,b*d,0,0,0,0,u,0,0,0,0,1]),x=r.f[4];if(x){A=mt(A,ht(x))}let C=r.f[5];if(C){let e=function(e){let t=_(e),n=$(e),r=new Float32Array(16);return r[0]=t,r[2]=n,r[5]=1,r[8]=-n,r[10]=t,r[15]=1,r}(C);A=mt(A,e)}let F=r.f[6];if(F){A=mt(ht(F),A)}A[12]=y/Be,A[13]=-g/Be,A[14]=-7+i-Wt(t).Ne()[33][0],r[9]&&(m[3]=r[9][0]);let T,P=null;if(r.f[2]&&(P=r.f[2]),r[40]){let e=r[40][4]?25*Math.cos(Qe):0,t=r[40][4]?25*Math.cos(.5*Qe+2):0,n=H(r);T=[(r[40][0]-n[0]+e)/Be*r[40][5],-(r[40][1]-n[1]+t)/Be*r[40][6],0];let[o,i,u,l,a,f]=oe([Math.cos(-7/180*Math.PI),-Math.sin(-7/180*Math.PI),0,Math.sin(-7/180*Math.PI),Math.cos(-7/180*Math.PI),0],[1,0,T[0],0,1,T[1]]);T=[u,f,0]}if(r[43]&&r[43][0]){const e=r[43][0];A[14]+=e,T&&(T[2]=.36*e)}ut(n,l,a,m,P,f,s,d,u,r.drawId,A,h,v,c,T)}function ut(e,t,n,r,o,i,u,l,a,f,c,s,d,v,h){let m=!0;if(!Oe[t]){if(!We[t]){let n=t;{let r=function(){this.status<400&&this.status>=200&&function(e,t,n){const r=new DataView(n);let o=0,i=r.getUint16(o,!1);o+=2;let u=r.getUint16(o,!1);o+=2;let l=[],a=[],f=[],c=[];for(let e=0;e<i;++e)for(let e=0;e<3;++e){let e=r.getInt8(o);o+=1,l.push(e/100)}for(let e=0;e<i;++e){let e=r.getUint8(o);o+=1;let t=(240&e)>>4,n=15&e;a.push(t/15),a.push(n/15)}for(let e=0;e<u;++e)for(let e=0;e<3;++e){let e=r.getUint16(o,!1);o+=2,c.push(e)}let s=lt(e,l),d=lt(e,a),v=f.length>0?lt(e,f):null;const h=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,h),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),e.STATIC_DRAW),Oe[t]={pos:s,texCoord:d,weights:v,index:h,triCount:c.length},De()}(e,n,this.response)};var p=new XMLHttpRequest;We[t]={loaded:!1},p.addEventListener("load",r.bind(p)),p.open("GET",Ne+n+".g3d.bin"),p.responseType="arraybuffer",p.send()}}t="Cube",m=!1}ke(e,"SuperRoo"===t||"Robot_Boss2"===t?2:0,Ve),h?Se(e,"ui",null,new Float32Array(h)):Se(e,"ui","B",Ee),je(e,t,Oe[t]);let w=r[3];if("ST"===n||n===Xe)He[n]||(He[n]=vt(e,n===Xe)),Ie(e,0,n,He[n]),r=[1,1,1,r[3]];else if(n)m=function(e,t,n,r){let o=n[t];if(!n[t]){var i=new Image;i.crossOrigin="anonymous",o={texture:dt(e,r[0],r[1],r[2],r[3]),img:i,loaded:!1},i.src="./"+t,(t=>{let r=t;i.addEventListener("load",(()=>{n[r].texture=ft(e,n[r].img),n[r].loaded=!0}),!1)})(t),n[t]=o}o.texture&&Ie(e,0,t,o.texture);return n[t].loaded}(e,n,Ye,r)&&m,r=[1,1,1,r[3]];else if("Cube"===t||"Plane"===t||"UpPlane"===t){let t=null,n=s;null===n&&(t="b",n=Ge),Ie(e,0,t,n),w=null}else if(s)Ie(e,0,null,s),r=[1,1,1,r[3]];else if(d){if(!He[d]){let t=d.split("_");He[d]=function(e,t){let n=t.length,r=t.map((e=>at(e))),o=4,i=n*o,u=i,l=[];for(let e=0;e<u;++e)for(let t=0;t<i;++t){let[n,i,a,f]=r[Math.floor(t/o)],c=1-e/(u-1);n=255*D(c,n,.5*n),i=255*D(c,i,.5*i),a=255*D(c,a,.5*a),f=255,l.push(n,i,a,f)}return st(e,l,i,u,e.CLAMP_TO_EDGE,e.LINEAR)}(e,t)}Ie(e,0,d,He[d]),r=[1,1,1,r[3]]}v&&!m||(i?Ie(e,1,"decal",qe):Ie(e,1,"b",Ge),o?(Se(e,"un",null,new Float32Array(o[0])),Se(e,"um",null,new Float32Array(o[1]))):(Se(e,"un","O",Le),Se(e,"um","B",ze)),Se(e,"ul",null,.12*f),Se(e,"uh",null,new Float32Array([u/2,l/2,a/2])),Se(e,"ut",w,new Float32Array(r)),Se(e,"ug",null,c),Re(e,Oe))}function lt(e,t){let n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),n}function at(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1]:[0,0,0,1]}function ft(e,t){const n=e.createTexture(),r=e.TEXTURE_2D;return e.activeTexture(e.TEXTURE2),e.bindTexture(r,n),e.texImage2D(r,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(r,e.TEXTURE_MIN_FILTER,e.LINEAR),!function(e){return ct(e.width)&&ct(e.height)}(t)?(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(r,e.TEXTURE_WRAP_T,e.REPEAT)),n}function ct(e){return 0==(e&e-1)}function st(e,t,n,r,o,i){const u=e.createTexture();let l=new Uint8Array(t);if(null===u)throw"Unable to create texture";const a=e.TEXTURE_2D;return e.activeTexture(e.TEXTURE2),e.bindTexture(a,u),e.texImage2D(a,0,e.RGBA,n,r,0,e.RGBA,e.UNSIGNED_BYTE,l),e.texParameteri(a,e.TEXTURE_WRAP_S,o),e.texParameteri(a,e.TEXTURE_WRAP_T,o),e.texParameteri(a,e.TEXTURE_MIN_FILTER,i),e.texParameteri(a,e.TEXTURE_MAG_FILTER,i),u}function dt(e,t,n,r,o){return st(e,[t*=255,n*=255,r*=255,o*=255],1,1,e.CLAMP_TO_EDGE,e.LINEAR)}function vt(e,t,n){let r=256,o=127.5,i=[];for(let e=0;e<256;++e)for(let u=0;u<r;++u){let r,l,a;if(t){let t=j(u,82.5,172.5),n=j(e,82.5,172.5);r=82.5,l=u-t,a=e-n}else l=u-o,a=e-o,r=o;let f=Math.sqrt(l*l+a*a)/r;n?(f=j(1.5*f-.5,0,1),f*=f):f=I(Math.min(f,1),0,1);let c=0,s=0,d=0,v=Math.round(255*(1-f));i.push(c,s,d,v)}return st(e,i,r,256,e.CLAMP_TO_EDGE,e.LINEAR)}function ht(e){let t=_(e),n=$(e),r=new Float32Array(16);return r[0]=1,r[5]=t,r[6]=n,r[9]=-n,r[10]=t,r[15]=1,r}function mt(e,t){let n=e[0],r=e[1],o=e[2],i=e[3],u=e[4],l=e[5],a=e[6],f=e[7],c=e[8],s=e[9],d=e[10],v=e[11],h=e[12],m=e[13],p=e[14],w=e[15],y=t[0],M=t[1],b=t[2],g=t[3],A=t[4],x=t[5],$=t[6],_=t[7],C=t[8],F=t[9],T=t[10],P=t[11],k=t[12],S=t[13],I=t[14],D=t[15];return new Float32Array([n*y+r*A+o*C+i*k,n*M+r*x+o*F+i*S,n*b+r*$+o*T+i*I,n*g+r*_+o*P+i*D,u*y+l*A+a*C+f*k,u*M+l*x+a*F+f*S,u*b+l*$+a*T+f*I,u*g+l*_+a*P+f*D,c*y+s*A+d*C+v*k,c*M+s*x+d*F+v*S,c*b+s*$+d*T+v*I,c*g+s*_+d*P+v*D,h*y+m*A+p*C+w*k,h*M+m*x+p*F+w*S,h*b+m*$+p*T+w*I,h*g+m*_+p*P+w*D])}const pt=-1;let wt=[0,1,1,1,1,0,0,0],yt=[0,1,2,2,3,0];const Mt={vertices:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,pt,1,-1,pt,1,1,pt,-1,1,pt,-1,-1,1,1,-1,1,-1,-1,pt,1,-1,pt,1,-1,1,1,1,1,1,-1,pt,1,1,pt],texCoords:[0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,0,1,1,1,1,1,1,0,1,1,1,0],indices:[0,1,2,2,3,0,7,6,5,5,4,7,4,0,3,3,7,4,3,2,6,6,7,3,10,11,9,9,8,10,12,14,15,15,13,12]},bt={vertices:[-1,-1,0,1,-1,0,1,1,0,-1,1,0],texCoords:wt,indices:yt},gt={vertices:[-1,-1,pt,1,-1,pt,1,-1,1,-1,-1,1],texCoords:wt,indices:yt},At=function(){let e=[],t=[],n=[],r=[];for(let o=0;o<81;++o){for(let t of bt.vertices)e.push(t/10);for(let e of bt.texCoords)t.push(e);n.push(o),n.push(o),n.push(o),n.push(o);for(let e of bt.indices)r.push(e+4*o)}return{program:1,vertices:e,texCoords:t,indices:r,pNum:n}}();function xt(e,t,n,r,o,i){for(let u of o.collidesWith)for(let o of e.an[u])for(let u=0;u<r[o].length;++u){let l=r[o].array[u];if(l.uid===n.uid)continue;let a=H(n),f=n[3],c=Q(n),s=Y(n),d=H(l),v=l[3],h=Q(l),m=Y(l),p=!1;if(f[0]>v[0]){let e=a;a=d,d=e,e=c,c=h,h=e,e=s,s=m,m=e,e=f,f=v,v=e,p=!0}let w=f[0]+v[0],y=null;if(2===w?y=Tt(a,c,f,d,h,v,p):3===w?y=Pt(a,c,f,d,h,v,p,m):4===w?y=kt(a,c,f,d,h,v,p):5===w?y=St(a,c,f,d,h,v,p,i):6===w&&(y=It(a,c,f,d,h,v,p,i)),y){let[r,o]=y;$t(e,t,n,l,r,o)}else n.e[l.uid]&&Ft(e,t,5,n,l),delete n.e[l.uid]}}function $t(e,t,n,r,o,i){i+=.1;let u=1,l=1,a=1,f=1;n[26]&&([u,l]=n[26]),r[26]&&([a,f]=r[26]);let c=u>0,s=a>0,d=c?1/u:0,v=s?1/a:0,h=!1;for(let t of n.a[0])if((t[0]===r.type||t[0]===r.label)&&6===t[2][0]&&ln(e,n,t[1])){h=!0;break}if(!h)for(let t of r.a[0])if((t[0]===n.type||t[0]===n.label)&&6===t[2][0]&&ln(e,n,t[1])){h=!0;break}let m=null;if(h&&(c||s)){m=S([n[1][0]-r[1][0],n[1][1]-r[1][1]],o);let e=d+v;if(m<0){let t=(1+Math.min(l,f))*m/e,i=t*o[0],u=t*o[1];n[1][0]-=i*d,n[1][1]-=u*d,r[1][0]+=i*v,r[1][1]+=u*v}let u=o[0]*i*.25,a=o[1]*i*.25;U(n,n[13][0]+u*(d/e),n[13][1]+a*(d/e),t.Rt()),U(r,r[13][0]-u*(v/e),r[13][1]-a*(v/e),t.Rt()),m<-1&&(n.e[r.uid]||Ct(t,n,r,o,i,m))}n.e[r.uid]?Ft(e,t,4,n,r,o):(Ft(e,t,0,n,r,o),n.e[r.uid]=1,r.e[n.uid]=1)}function _t(e,t){let n=(r=e.tt(),(o=t)[4]?r[o[4][2]]:o[5]?r[o[5][3]]:o[10]?r[o[10][2]]:"000000");var r,o;let i=t[33],u=0,l=0,a=!0;i&&(u=X(t),l=i[1],a=!1),le(e.Tn(),a,H(t),u,l,n,N(t),36,1)}function Ct(e,t,n,r,o,i){if(null==i){i=S([t[1][0]-n[1][0],t[1][1]-n[1][1]],r)}let[u,l]=N(t),a=[t[0][0]+r[0]*(-u+o),t[0][1]+r[1]*(-l+o)],f=t[33],c=.25,s=0,d=!0;f&&(c=X(t),s=f[1],d=!1),function(e,t,n,r,o,i,u){let l=I(Math.min(1,u/36),.25,2.75),a=new ae(t,1,24,n,i,o,7,50,["#A2A2A2"],l,r,0);e.push(a)}(e.Tn(),d,a,c,[r[0],r[1]],N(t),Math.abs(i)),t.f[1]=[1.5,r,-i],n.f[1]=[1.5,[-1*r[0],-1*r[1]],-i]}function Ft(e,t,n,r,o,i){i=i||[0,0];let u=!1,l=!1;for(let a of r.a[n])if((a[0]===o.type||a[0]===o.label)&&ln(e,r,a[1])){t.Pn(e,r,a[2],!0,o,i);let n=a[2][0];u=u||8===n,l=l||5===n&&o[7][0]<=0}for(let a of o.a[n])if((a[0]===r.type||a[0]===r.label)&&ln(e,o,a[1])){t.Pn(e,o,a[2],!0,r,[-1*i[0],-1*i[1]]);let n=a[2][0];l=l||8===n,u=u||5===n&&r[7][0]<=0}u&&!r[31]&&_t(t,r),l&&!o[31]&&_t(t,o)}function Tt(e,t,n,r,o,i,u){let l=A((n[1]*t+i[1]*o)*(n[1]*t+i[1]*o))-A(k(e,r));if(l>0){let t=P([e[0]-r[0],e[1]-r[1]]);return u&&(t[0]*=-1,t[1]*=-1),[t,l]}return null}function Pt(e,t,n,r,o,i,u,l){let[a,f]=e,c=n[1]*t,[s,d]=r,[v,h]=i.slice(1);if(v=v/2*o,h=h/2*o,a-=s,f-=d,0!==l){let e=b(-l),t=M(-l),n=a;a=e*n-t*f,f=e*f+t*n}let m=a,p=f,w=[0,0];m<-v?(m=-v,w[0]=-1):m>v&&(m=v,w[0]=1),p<-h?(p=-h,w[1]=-1):p>h&&(p=h,w[1]=1);let y=c*c,g=k([a,f],[m,p]);if(y>=g){let e=A(y)-A(g);if(m===a&&p===f){let t=[Math.abs(a- -v),Math.abs(a-v),Math.abs(f- -h),Math.abs(f-h)];e=t[0],w=[-1,0],e>t[1]&&(e=t[1],w=[1,0]),e>t[2]&&(e=t[2],w=[0,-1]),e>t[3]&&(e=t[3],w=[0,1])}if(0!==l){let e=b(l),t=M(l),n=w[0],r=w[1];w[0]=e*n-t*r,w[1]=e*r+t*n}let t=P(w);return u&&(t[0]*=-1,t[1]*=-1),[t,e]}return null}function kt(e,t,n,r,o,i,u){let[l,a]=e,[f,c]=n.slice(1),[s,d]=r,[v,h]=i.slice(1);if(f/=2,c/=2,v/=2,h/=2,l-f<s+v&&l+f>s-v&&a-c<d+h&&a+c>d-h){return[P([s-l,d-a]),0]}return null}function St(e,t,n,r,o,i,u,l){let[a,f]=e,c=n[1]*t,s=i[1],d=i[2],v=i[3],h=i[4],m=i[5];s||(c*=-1);let p,w=!1,y=0;return h&&f+c>z?(w=!0,p=[0,-1],y=f+c-z):d&&f-c<-960&&(w=!0,p=[0,1],y=-(f-c)-z),m&&a+c>E?(w=!0,p=[-1,0],y=a+c-E):v&&a-c<-560&&(w=!0,p=[1,0],y=-(a-c)-E),w?(u&&(p[0]*=-1,p[1]*=-1),[p,y]):null}function It(e,t,n,r,o,i,u,l){let[a,f]=e,[c,s]=n.slice(1),d=i[1],v=i[2],h=i[3],m=i[4],p=i[5];c/=2,s/=2,d||(c*=-1,s*=-1);let w,y=!1,M=0;return m&&f+s>z?(y=!0,w=[0,-1],M=f+s-z):v&&f-s<-960&&(y=!0,w=[0,1],M=-(f-s)-z),p&&a+c>E?(y=!0,w=[-1,0],M=a+c-E):h&&a-c<-560&&(y=!0,w=[1,0],M=-(a-c)-E),y?(u&&(w[0]*=-1,w[1]*=-1),[w,M]):null}function Dt(e,t){return e instanceof Array?t.kn(e[0]):e}let jt={0:(e,t)=>{e.Sn("score",Dt(t[1],e))},1:(e,t,n,r,o,i,u,l,a)=>{let f,c,s,d=[];for(let e=3;e<9;++e)t[e]=t[e]||0;f=1===t[7]?0:0===t[7]?2*e.In(n)-1:Math.floor(e.In(n)*t[7])/(t[7]-1)*2-1,c=1===t[8]?0:0===t[8]?2*e.In(n)-1:Math.floor(e.In(n)*t[8])/(t[8]-1)*2-1,d[0]=Dt(t[3],e)+f*Dt(t[5],e),d[1]=Dt(t[4],e)+c*Dt(t[6],e),s=t[2]?d:[H(n)[0]+d[0],H(n)[1]+d[1],X(n)];let v=e.Dn(t[1],s,[0,0,0],t[2]?n:null,a);t[2]&&n.b.push(v)},11:(e,t,n,r,o,i,u,l,a)=>{let f=Y(n)+(2*e.In(n)-1)*(w*t[2]/2/180),c=t[3]+(2*e.In(n)-1)*t[4],s=b(f)*c,d=M(f)*c,v=[H(n)[0]+s,H(n)[1]+d,X(n)];e.Dn(t[1],v,[f,0,0],null,a)},2:(e,t,n)=>{let r=t[1];n[1][r?0:1]=Dt(t[2],e)},3:(e,t,n)=>{n[1][t[1]]*=-1},4:e=>{e.jn()},5:(e,t,n,r,o,i,u,l)=>{let a=o&&o[7];a&&(a[0]-=Dt(t[1],e),a[0]<=0&&e.zt().push(o.uid))},6:()=>{},10:()=>{},7:(e,t,n,r,o,i,u,l)=>{let a=!1,f=!1,c=[0,0],s=N(n);Math.abs(i[0])>.1&&(a=!0,c[0]=n[13][0]>0?-1080-2*s[0]:1080+2*s[0]),Math.abs(i[1])>.1&&(f=!0,c[1]=n[13][1]>0?-1920-2*s[1]:1920+2*s[1]),a&&U(n,n[13][0]+c[0],n[13][1],e.Rt()),f&&U(n,n[13][0],n[13][1]+c[1],e.Rt())},8:(e,t,n)=>{e.zt().push(n.uid)},9:(e,t,n,r,o,i,u,l)=>{U(n,u[0],u[1],e.Rt())}};jt[12]=(e,t,n,r,o,i,u,l)=>{!function(e,t,n){if(e.c===t)return;if(t.c)return;e.c=t,t.b.push(e.uid);let r=ne(t),[o,i]=re(r,e[13],1);U(e,o,i,n);let u=re(r,[0,1],0);V(e,-1*Math.atan2(u[0],u[1]),n)}(n,o,e.Rt())},jt[13]=(e,t,n,r,o,i,u,l)=>{let a=P(l),f=Nt(a[2])*Dt(t[1],e);n[1][0]+=a[0]*f,n[1][1]+=a[1]*f},jt[14]=(e,t,n)=>{let r=0;n[5]&&(r=n[5][3]),n[4]&&(r=n[4][2]),n[25]=[5,t[1],r]},jt[17]=(e,t,n,r)=>{let o=t[1],i=e.jt()[o];if(i.length>0){let o=H(n),u=H(i.array[0]),l=Dt(t[2],e),a=u[0]-o[0],f=u[1]-o[1],[c,s,d]=P([a,f]);d<l*r?U(n,u[0],u[1],e.Rt()):U(n,n[13][0]+c*l*r,n[13][1]+s*l*r,e.Rt())}},jt[18]=(e,t,n,r)=>{let o=C(Dt(t[1],e));V(n,n[14]+o*r,e.Rt())},jt[19]=(e,t,n,r)=>{let o=t[1],i=e.jt()[o];if(i.length>0){let o=H(n),u=H(i.array[0]),l=C(Dt(t[2],e)),a=g(o[1]-u[1],o[0]-u[0])+w-n[14],f=a<0?-1:1;Math.abs(a)>w&&(f*=-1,a=(2*w-Math.abs(a))*f),Math.abs(a)<l*r?V(n,n[14]+a,e.Rt()):V(n,n[14]+f*l*r,e.Rt())}},jt[20]=(e,t,n,r)=>{let o=Dt(t[1],e),i=n[14],u=b(i),l=M(i),[a,f]=P([u,l]);U(n,n[13][0]+a*o*r,n[13][1]+f*o*r,e.Rt())},jt[21]=(e,t,n,r)=>{let o=Dt(t[1],e),i=Dt(t[2],e),u=Dt(t[3],e),l=Dt(t[4],e);if(t[6]&&(t[5]=2*e.In(n)*Math.PI/u),!t[7]){let r=Dt(t[5],e)+e.Rn();U(n,n[13][0]+o*b(r*u),n[13][1]+i*M(r*l),e.Rt()),t[7]=r}let a=t[7];t[7]+=r;let f=t[7];U(n,n[13][0]+o*b(f*u)-o*b(a*u),n[13][1]+i*M(f*l)-i*M(a*l),e.Rt())},jt[15]=(e,t,n,r)=>{let o=Dt(t[1],e),i=Dt(t[2],e);n[1][0]+=o*r,n[1][1]+=i*r},jt[16]=(e,t,n)=>{n[8]=[Dt(t[1],e),Dt(t[2],e)]},jt[22]=(e,t,n,r)=>{let o=P(n[1]),i=Math.max(0,o[2]-Dt(t[1],e)*r);n[1]=[o[0]*i,o[1]*i]},jt[23]=(e,t,n)=>{let r=t[1];t[2]?r+=e.Nn():r-=1;let o=r>0&&r!=e.Nn(),i=n&&n[0]?n[0]:[0,0],u=t[3],l=t[4];e.On(r,o,u,l,i)},jt[24]=(e,t)=>{e.Ne()[29]=[t[1],t[2],0,0]},jt[25]=(e,t)=>{e.Bn(Dt(t[1],e))},jt[26]=(e,t)=>{e.Sn(t[1],t[2],!1)},jt[27]=(e,t,n)=>{let r=Dt(t[1],e),o=Dt(t[2],e),i=Dt(t[3],e);n[9]=[r,o,i]},jt[28]=(e,t,n,r,o,i,u,l,a)=>{let f,c,s=[],d=[t[1],t[2],t[3],t[4],t[5],t[6]].filter((e=>""!==e)),v=d[Math.floor(e.In(n)*d.length)];f=1===t[11]?0:0===t[11]?2*e.In(n)-1:Math.floor(e.In(n)*t[11])/(t[11]-1)*2-1,c=1===t[12]?0:0===t[12]?2*e.In(n)-1:Math.floor(e.In(n)*t[12])/(t[12]-1)*2-1,s[0]=Dt(t[7],e)+f*Dt(t[9],e),s[1]=Dt(t[8],e)+c*Dt(t[10],e);let h=[H(n)[0]+s[0],H(n)[1]+s[1],X(n)];t[13]&&(h=s);let m=e.Dn(v,h,[0,0,0],t[13]?n:null,a);t[13]&&n.b.push(m)},jt[29]=(e,t,n,r)=>{let o=t[1],i=e.jt()[o];if(i.length>0){let o=i.array[0],u=H(n),l=H(o),a=l[0]-u[0],f=l[1]-u[1],c=X(o)-X(n);t[3]&&(a=0),t[4]&&(f=0),t[5]&&(c=0),t[6]&&(f>0&&(f=0),a<0&&(a=0));let[s,d,v,h]=function(e){if(0===e[0]&&0===e[1]&&0===e[2])return[1,0,0,0];{let t=A(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t,t]}}([a,f,c]),m=1+Math.floor(h*Dt(t[2],e));h<m*r?(U(n,n[13][0]+a,n[13][1]+f,e.Rt()),n[33]&&(n[33][0]+=c)):(U(n,n[13][0]+s*m*r,n[13][1]+d*m*r,e.Rt()),n[33]&&(n[33][0]+=v*m*r))}},jt[30]=(e,t,n,r)=>{n.f[2]||(n.f[2]=[[Dt(t[1],e),Dt(t[2],e)],[0,0]]);let o=Dt(t[3],e),i=Dt(t[4],e),u=N(n);n.f[2][1][0]+=o*r/(2*u[0]),n.f[2][1][1]+=i*r*-1/(2*u[1])},jt[31]=(e,t)=>{let n,r=e.Ne();n=r.f[3]?r.f[3][1]:r[34].slice(6,8).map((e=>at(e))),r.f[3]=[n,[at(t[1]),at(t[2])],t[3],0,t[4]]},jt[32]=(e,t,n)=>{if(!n[33])return;let r=n[36],o=n[33][0],i=n[33][8];n[36]=[r[0],r[1],Dt(t[1],e)+i-o,r[3],r[4],Dt(t[2],e)]},jt[33]=(e,t,n)=>{let r=n[36];n[36]=[r[0]+Dt(t[1],e),r[1]+Dt(t[2],e),r[2],.25,.25,r[5]]},jt[34]=e=>{e.En()},jt[35]=(e,t,n,r)=>{let o=C(Dt(t[1],e));n.f[5]+=o*r},jt[36]=()=>{},jt[37]=(e,t,n)=>{let r=H(n);n[40]=[r[0],r[1],0,0,t[1],t[2],t[3],t[4],t[5]]},jt[38]=(e,t,n,r)=>{let o=C(Dt(t[1],e));n.f[4]+=o*r},jt[39]=(e,t)=>{e.Sn(t[1],t[2],!0)},jt[40]=(e,t,n,r,o,i,u,l)=>{Ct(e,n,o,i,S(N(n),i),t[1])},jt[42]=(e,t)=>{e.zn(!1,t[1],Dt(t[2],e))},jt[41]=(e,t)=>{e.zn(!0,t[1],Dt(t[2],e))},jt[43]=(e,t,n,r)=>{if(!n[33])return;let o=Dt(t[1],e),i=Dt(t[2],e);if(t[4]&&(t[3]=2*e.In(n)*Math.PI/i),!t[5]){let r=Dt(t[3],e)+e.Rn(),u=n[33][0];n[33][0]=u+o*M(r*i),t[5]=r}let u=t[5];t[5]+=r;let l=t[5],a=n[33][0];n[33][0]=a+o*M(l*i)-o*M(u*i)},jt[44]=(e,t,n)=>{n[42]=[t[1],t[2],n[13][0]-2e3,t[2]]};let Rt=null;function Nt(e){return I(Math.min(e/421,1),0,1)}jt[45]=(e,t,n)=>{Rt=n[33].slice()},jt[46]=(e,t,n)=>{if(Rt){let e=n[33][0],t=n[33][1],r=n[33][4];n[33]=Rt.slice();let o=n[33][1];n[33][0]=e+(o-t)/2,n[33][4]=r}},jt[47]=(e,t,n)=>{e.Ln(t[1],H(n),X(n))},jt[48]=(e,t,n)=>{Math.abs(n[13][0])>t[1]&&U(n,n[13][0]>0?t[1]:-t[1],n[13][1],e.Rt())},jt[49]=(e,t,n,r)=>{let o=C(Dt(t[1],e));const i=-.01;let u=Dt(t[2],e);if(t[4]&&(t[3]=2*e.In(n)*Math.PI/u),!t[5]){let r=Dt(t[3],e)+e.Rn(),l=n.f[6]||0;n.f[6]=l+o*M(r*u);let a=n[33][0];n[33][0]=a+i*Math.abs(M(r*u)),t[5]=r}let l=t[5];t[5]+=r;let a=t[5],f=n.f[6]||0;n.f[6]=f+o*M(a*u)-o*M(l*u);let c=n[33][0];n[33][0]=c+i*Math.abs(M(a*u))-i*Math.abs(M(l*u))},jt[50]=(e,t,n,r)=>{let o=0;n[43]&&n[43][0]&&(o=n[43][0]),n[43]=[o,t[1],t[2],0]},jt[51]=(e,t,n,r,o,i,u,l,a)=>{let f,c,s=[],d=[t[1],t[2],t[3],t[4],t[5],t[6]].filter((e=>""!==e)),v=d[Math.min(d.length,Dt(t[7],e))];f=2*e.In(n)-1,c=2*e.In(n)-1,s[0]=Dt(t[9],e)+f*Dt(t[11],e),s[1]=Dt(t[10],e)+c*Dt(t[12],e);let h=[H(n)[0]+s[0],H(n)[1]+s[1],X(n)];t[8]&&(h=s);let m=e.Dn(v,h,[0,0,0],t[8]?n:null,a);t[8]&&n.b.push(m)};let Ot,Bt={Kn:[0,0]},Et=!1;function zt(e,t){let n=t.target.getBoundingClientRect(),r=(t.clientX-n.left)/n.width,o=(t.clientY-n.top)/n.height;return e([r*O-540,o*B-960])}const Lt=.036*-1080;function Kt(e,t,n){let r,o;if(!e){let e=n[t]=Bt;Bt={Un:e.Un,Kn:e.Kn,Gn:e.Gn,Vn:e.Vn,qn:e.qn,Hn:e.Hn,Qn:e.Qn,Xn:e.Xn}}o=t>0?n[t-1]:{mousePosition:[0,0],lastMousePos:[0,0]},r=n[t];let i=0===o.Un,u=o.Vn||o.qn||o.Xn,l=o.Vn||o.Qn,a=o.qn||o.Hn,f=i&&o.Kn[0]<Lt||l,c=i&&o.Kn[0]>Lt||a,s=0===r.Un,d=r.Vn||r.qn||r.Xn,v=s&&r.Kn[0]<Lt||r.Vn||r.Qn,h=s&&r.Kn[0]>Lt||r.qn||r.Hn,m=[],p=[0,0],w=[0,0];return s||d?(m.push(i||u?3:0),p=r.Kn,r.Kn&&r.Gn&&(w=[Math.round(r.Kn[0])-Math.round(r.Gn[0]),Math.round(r.Kn[1])-Math.round(r.Gn[1])])):(i||u)&&(m.push(6),p=r.Kn,r.Kn&&r.Gn&&(w=[Math.round(r.Kn[0])-Math.round(r.Gn[0]),Math.round(r.Kn[1])-Math.round(r.Gn[1])])),v?(m.push(i||l?4:1),p=r.Kn):f&&(m.push(7),p=r.Kn),h?(m.push(i||a?5:2),p=r.Kn):c&&(m.push(8),p=r.Kn),p[0]=Math.round(p[0]),p[1]=Math.round(p[1]),[m,p,w]}const Ut=[{id:1,update:(e,t,n)=>{let[r,o]=e[1];e[12]&&(r+=e[12][0],o+=e[12][1],delete e[12]),U(e,e[13][0]+r*t,e[13][1]+o*t,n.Rt)}},{id:8,update:(e,t,n)=>{let r=e[8][1];!function(e,t,n){e[15]=t,q(e,[u,a,i,0,d],n)}(e,e[15]*(1-r)+e[8][0]*r,n.Rt)}},{id:9,update:(e,t,n)=>{let[r,o,i]=e[9],u=i*t;e[9][0]=r*(1-u)+o*u}},{id:6,update:(e,t,n)=>{}},{id:4,render:e=>{}},{id:5,render:e=>{}},{id:e,render:e=>{}},{id:t,update:(e,t,n)=>{let r=e[11][1],o=r?Wt(n).kn(r):n.It;e[10][3]=e[11][0]+" "+o}},{id:l,update:(e,t,n)=>{let r=e[25][1];e[25][0]--,e[25][0]<=0&&(r=e[25][2],delete e[25]),e[5]&&(e[5][3]=r),e[4]&&(e[4][2]=r)}},{id:f,update:(e,t,n)=>{if(n.hn){let t=(n.Yn>n.hn?"You Won!":"You Lost")+" "+n.Yn+" vs "+n.hn;e[10][3]=-1!==n.Yn?t:e[28]}else e[10][3]=-1!==n.Yn?K("gs_hm_score")+" "+n.Yn:e[28]}},{id:c,update:(e,t,n)=>{let r=2*x()*Math.PI,[o,i,u,l]=e[29];if(o<.02)delete e[29],U(e,e[13][0]-u,e[13][1]-l,n.Rt);else{let a=_(r)*o,f=$(r)*o;e[29]=[.8*o,i-t,a,f],U(e,e[13][0]+a-u,e[13][1]+f-l,n.Rt)}}},{id:v,update:(e,t,n)=>{const r=[3,3,.001];let o=[0,0,0];for(let t=0;t<3;++t){let n=e[36][t],i=e[37][t],u=e[36][t+3];0!==Math.abs(n)?(i=(i+u*n)/2,Math.abs(i)<r[t]&&(i=i>0?r[t]:-r[t]),o[t]=i,Math.abs(o[t])>Math.abs(n)?(o[t]=n,e[36][t]=0,e[37][t]=0):e[36][t]-=o[t],e[37][t]=i):e[37][t]=0}U(e,e[13][0]+o[0],e[13][1]+o[1],n.Rt),e[33]&&(e[33][0]+=o[2])}},{id:h,update:(e,t,n)=>{let r=H(e);for(let t=0;t<2;++t){let n=r[t]-e[40][t],o=e[40][t+2];o=.9*o+.1*n,e[40][t+2]=o,e[40][t]=(e[40][t]+e[40][7]*o)*(1-e[40][8])+r[t]*e[40][8]}}},{id:m,update:(e,t,n)=>{if(e[42][3]=e[42][3]-t,e[42][3]<=0)return;U(e,function(e,t,n){let r=0,o=1-2*e;return r=.5*(1-o*o*o),D(r,t,n)}(e[42][3]/e[42][1],e[42][2]-e[42][0],e[42][2]+e[42][0]),e[13][1],n.Rt)}},{id:p,update:(e,t,n)=>{let r=e[43][3];if(r>e[43][2])return;e[43][3]+=1;const o=e[43][2]/2;if(r<o){const t=I(r/o,e[43][0],0);e[43][0]=I(r/o,t,e[43][1])}else e[43][0]=I((r-o)/o,e[43][1],0)}}],Gt=Ut.filter((e=>!!e.render)).reduce(((e,t)=>(e[t.id]=t.render,e)),{}),Vt=Ut.filter((e=>!!e.update)).map((e=>({i:e.id,u:e.update})));var qt=n(153);let Ht={};function Qt(e,t,n,r,o,i,u,l,a){jt[n[0]](Wt(e),n,t,r?1:e.Vt,o,i,u,l,a)}let Xt=null;function Yt(e){return{Sn:(t,n,r)=>{if("score"===t){let t=r?0:e.It;e.It=t+n;let o=r?0:e.Dt;e.Dt=o+n,GAMESNACKS&&GAMESNACKS.sendScore({score:e.It})}else{e.Ut[t]||(e.Ut[t]=0);let o=r?0:e.Ut[t];e.Ut[t]=o+n}},jt:()=>e.jt,Rt:()=>e.Rt,In:e=>e.rand(),Dn:nn.bind(null,e),zt:()=>e.zt,On:(t,n,r,o,i)=>{e.Xt=t,e.Zt=o,r?e.Wt=1:(e.Wt=n?100:36,n&&(le(e.tn,!1,i,0,0,"#b5a100",[5,5],60,.25,[0,-1]),e.Dt<=(e.pn[e.Qt].es||0)&&(le(e.tn,!1,L(i,50),0,0,"#38940d",[5,5],60,.25,[0,-1]),le(e.tn,!1,L(i,50),0,0,"#007eab",[5,5],60,.25,[0,-1]),le(e.tn,!1,L(i,50),0,0,"#ad0040",[5,5],60,.25,[0,-1])),function(e,t){(function(e,t,n){let r=new ae(!0,2,64,[-540,-1e3],[1080,n],[0,0],40,80,t,1,0,0);e.push(r)})(e.tn,["#FDF6BF","#91E46B","#86DCFB","#EE80C5"],20),e.kt.Je.addNotification(e,t)}(e,"Level Complete!"),GAMESNACKS.levelComplete(e.Qt+1))),e.Dt=0},jn:()=>{e.Yt=!0,e.Wt=0},tt:()=>e.Fn.tt,Pn:Qt,Ne:()=>e.jt.C_.array[0],Bn:t=>{e.qt=t},Nn:()=>e.Qt,kn:t=>"score"===t?e.It:"_par"===t?e.pn[e.Qt].es:"_levelScore"===t?e.Dt:e.Ut[t]||0,Tn:()=>e.tn,En:()=>{0===e.ln&&(e.ln=1)},Rn:()=>e.Lt,zn:(e,t,n)=>{let r=Ht[t];r||(r=new qt.Howl({src:["./"+t],loop:e}),Ht[t]=r),e&&r.stop();let o=r.play();r.volume(n,o)},Ln:(t,n,r)=>{e.sn[e.Qt].push([t,n,r])}}}function Wt(e){return Xt||(Xt=Yt(e)),Xt}function Zt(e,t,n,r,o,i){Xt=null;let u=function(e,t,n,r){let o={Yn:-1};return o.Fn=r.makeRenderState(e,n,r),o.kt=ce.makeRenderState(t,n,ce),ge(o),o}(e,t,r,Ze);return Jt(u,r,o,i),function(e,t,n){Ot=t,e.addEventListener("mousedown",(e=>{Et||(Bt.Kn=zt(n,e),Bt.Un=0,Bt.Gn=Bt.Kn)})),e.addEventListener("mousemove",(e=>{Et||(Bt.Kn=zt(n,e))})),e.addEventListener("mouseup",(e=>{Et||(Bt.Kn=zt(n,e),Bt.Un=1)})),e.addEventListener("touchstart",(e=>{0!==e.touches.length&&(Bt.Kn=zt(n,e.touches[0]),Bt.Un=0,Bt.Gn=Bt.Kn,Et=!0,e.preventDefault())}),!1),e.addEventListener("touchmove",(e=>{0!==e.touches.length&&(Bt.Kn=zt(n,e.touches[0]),e.preventDefault())}),!1),e.addEventListener("touchend",(e=>{Bt.Un=1,e.preventDefault()}),!1),window.addEventListener("keydown",(e=>{switch(e.keyCode){case 32:Bt.Xn=!0;break;case 87:case 38:Bt.Hn=!0;break;case 65:case 37:Bt.Vn=!0;break;case 83:case 40:Bt.Qn=!0;break;case 68:case 39:Bt.qn=!0}}),!1),window.addEventListener("keyup",(e=>{switch(e.keyCode){case 32:Bt.Xn=!1;break;case 87:case 38:Bt.Hn=!1;break;case 65:case 37:Bt.Vn=!1;break;case 83:case 40:Bt.Qn=!1;break;case 68:case 39:Bt.qn=!1}}),!1)}(t,Wt.bind(u),n),u}function Jt(e,t,n,r){qt.Howler.stop(),Ae(e,t,n=n||0,r),e.Fn.xn=[],e.Fn.$n=!0,e.Fn._n=[],e.Fn.Cn=!0,e.kt.lt=[],e.kt.at=!0,un(e,e.Qt)}function en(e,t,n){let r,o,i,u,l=void 0!==t.name;if(l||Array.isArray(t[1]))if(l?(i=t.name,u=t.p):(i=t[0],u=t[1]),u.length<3)r=[u[0],u[1],0],o=[0,0,0];else if(3===u.length)r=u.slice(0,3),o=[0,0,0];else{r=u.slice(0,3),o=u.slice(3,6);for(let e=0;e<o.length;++e)o[e]=C(o[e])}else if(i=t[0],"number"==typeof i&&(i="o"+i),t.length<4)r=[t[1],t[2],0],o=[0,0,0];else if(4===t.length)r=t.slice(1,4),o=[0,0,0];else{r=t.slice(1,4),o=t.slice(4,7);for(let e=0;e<o.length;++e)o[e]=C(o[e])}if(void 0!==n)for(let e=0;e<n.length;++e)r[e]+=n[e];return nn(e,i,r,o,null,!1)}function tn(e,t){e.Fn.Je.rendererSetSize(e,t)}function nn(e,t,n,r,o,i){let u=e.St.o[t];e.jt[t].array.length<=e.jt[t].length&&e.jt[t].array.push({}),e.jt[t].length++;let l=e.jt[t].length-1,a=e.jt[t].array[l],f=++e.Nt,c=t+"_"+f;e.Rt[c]=a,a.type=t,a.index=l,a.uid=c,a.label=u[3]||"",a.drawId=f,a.rand=T(e.Kt[0],i?e.Lt:e.jt[t].totalOccurances++),a.d={},a.d[0]=!0,a.d[17]=!0,a.d[16]=!0,a.d[20]=!0,a.d[27]=!0,a.d[32]=!0,a[36]=[0,0,0,.25,.25,.03],a[37]=[0,0,0],a[13]=n.slice(0,2),a[14]=r[0],a[15]=1;let d=[];for(let e of u[0])a[e[0]]=e.slice(1),Gt[e[0]]&&d.push([a,e[0]]);a[33]&&(a[33][0]+=n[2]||0,a[33][8]=a[33][0],a[33][3]=e.dn[a[33][3]||0]),a[7]||(a[7]=[1]),a[39]&&e.en.push(a.uid),a[38]&&a[10]&&(a[10][3]=e.vn),a.drawId=f,a[1]=[0,0],a.a=[];for(let e=0;e<6;++e)a.a[e]=[];for(let t of u[1]){let n=t[0][0],r=t[0][1],o=t.slice(2);44===o[0]&&(a[13][0]+=2e3,a[42]=void 0),0===n?0!==r&&4!==r&&5!==r||!t[0][2]?a.a[r].push([t[1],o]):a.a[r].push([t[0][2],t[1],o]):1===n?e.Ot[r+0].push([c,t[1],o]):2===n?e.Bt.push([t[0].slice(2).concat([t[0][3]]),c,t[1],o]):e.Et.push([t[0].slice(2),c,t[1],o]),13===t[2]&&(a[30]=[0,t[3]<0],e.Fn.xn.push([a,s]),e.Fn.$n=!0)}a.b=[];for(let t of u[2])a.b.push(nn(e,t[0],[t[1],t[2],0],[C(t[3]||0),0,0],a,i));a.c=o,a.e={},a.f={},a.f[4]=r[1],a.f[5]=r[2];for(let t of a.a[2])ln(e,a,t[0])&&Qt(e,a,t[1],!0);if(a[10]&&a[10][3]&&(a[10][3]=K(a[10][3])),a[11]&&a[11][0]&&(a[11][0]=K(a[11][0])),a[28]&&(a[28]=K(a[28])),d.length>0)for(let t of d)a[33]?(v=a)[10]||v[9]?(e.Fn._n.push(t),e.Fn.Cn=!0):(e.Fn.xn.push(t),e.Fn.$n=!0):(e.kt.lt.push(t),e.kt.at=!0);var v;return c}function rn(e,[t,n,r],o){if(e.Wt<=0)return function(e,t,n,r,o){let i=function(e){if(e.Yt&&e.Wt<=0){e.Yt=!1,e.Yn=e.It;let t=e.mn.intro||0;return Jt(e,e.St,t,[e.Kt[0],[],e.vn,e.hn]),{gameOver:!0,lost:!1,newLevel:t}}if(e.Xt>-1&&e.Wt<=0)return e.Qt=e.Xt,e.Qt>=e.St.a.length?e.Qt=e.St.a.length-1:e.Qt<0&&(e.Qt=0),e.Zt||(e.zt=Object.keys(e.Rt),an(e,!0),e.rn={index:0,completed:0},e.Jt=[e.pn[e.Qt].offsetX||0,-1*(e.pn[e.Qt].offsetY||0),e.pn[e.Qt].offsetZ||0],e.cn=[]),un(e,e.Qt),e.Xt=-1,e.Lt=0,{gameOver:!1,lost:!1,newLevel:e.Qt};return}(e);if(i)return i;let u=e.Vt;e.Lt++,e.Gt=[on(r)],e.mn.dynLevels&&function(e){let t=0,n=null;for(let r of e.en){if(!e.Rt[r])continue;let o=e.Rt[r][13][1];t=Math.min(t,o),n=null===n?o:Math.max(n,o)}for(;t-e.mn.dynLevelOffset<e.Jt[1];){let t=e.rn.index,n=e.nn[e.Qt][t],r=e.Ht()*n.weightSum,o=0,i=-1;for(let[e,t]of n.choices)if(o+=t,r<=o){i=e;break}if(-1===i)return void console.warn("No level choices to select from?",n.choices);e.cn.push([e.Jt[1]+-1*(e.pn[i].offsetY||0),[]]);let u=e.cn.length-1;for(let t of e.St.a[i]){let n=en(e,t,e.Jt);e.cn[u][1].push(n)}e.Jt[0]+=e.pn[i].offsetX||0,e.Jt[1]+=-1*(e.pn[i].offsetY||0),e.Jt[2]+=e.pn[i].offsetZ||0,e.rn.completed++,e.rn.completed>=n.times&&e.rn.index<e.nn[e.Qt].length-1&&(e.rn.completed=0,e.rn.index++)}for(;null!==n&&e.cn.length>0&&n+e.mn.dynLevelOffset<e.cn[0][0];){let t=e.cn.shift();if(t&&t[1]){for(let n of t[1])e.zt.push(n);an(e,!0)}}}(e);let l=[];for(let n of t)for(let t of e.Ot[n]){let r=e.Rt[t[0]];if(ln(e,r,t[1])){const e=n<3;l.push([r,t[2],e])}}let a=!1;if(o){let[t,n,r]=o;for(let n of t)for(let t of e.Ot[n+9]){let r=e.Rt[t[0]];if(ln(e,r,t[1])){const e=n<12;l.push([r,t[2],e])}}e.Gt.push(on(r)),o[3]&&(a=!0)}for(let[t,o,i]of l)Qt(e,t,o,i,null,null,n,r);for(let t of Object.values(e.jt))for(let n=0;n<t.length;++n){let r=t.array[n];for(let t of Vt)r[t.i]&&t.u(r,u,e);a&&r[35]&&(e.zt.push(r.uid),_t(Wt(e),r));for(let t of r.a[3])ln(e,r,t[0])&&Qt(e,r,t[1],!1);xt(e,Wt(e),r,e.jt,t,e.Fn.Ze)}(function(e){e.Lt;0;for(let t=0;t<e.Bt.length;++t){let n=e.Bt[t];if(n[0][2]-=e.Vt,n[0][2]<=0){n[0][0]?n[0][2]=n[0][1]:(e.Bt.splice(t,1),--t);let r=e.Rt[n[1]];ln(e,r,n[2])&&Qt(e,r,n[3],!1)}}})(e),function(e){for(let t of e.Et){let n=t[0][0],r=t[0][1];if(e.jt[n].length<=r){let n=e.Rt[t[1]];n&&ln(e,n,t[2])&&Qt(e,n,t[3],!1)}}}(e),an(e,!1),e.Vt=.86*e.Vt+.14*e.qt;let f=!1;1===e.ln&&(f=!0,e.ln=2);return{gameOver:!1,lost:f}}(e,t,n,r,o);e.Wt--;for(let t of Vt.filter((e=>e.i===c)))Wt(e).Ne()[t.i]&&t.u(Wt(e).Ne(),1,e);return{gameOver:!1,lost:!1}}function on(e){let t=P(e);return[t[0]*y(500,t[2]),t[1]*y(500,t[2])]}function un(e,t){if(en(e,[F,0,0]),e.sn[t])for(let[n,r,o]of e.sn[t])nn(e,n,[r[0],r[1],o],[0,0,0],null,!1);for(let n of e.St.a[t])en(e,n)}function ln(e,t,n){return!n||(n&&1===n[0]?t[1][1]>=0:n&&n[0]>1&&n[0]<5?(e.Ut.TUT||0)===n[0]-2:n&&5===n[0]?P(t[1])[2]<=20:!n||6!==n[0]||P(t[1])[2]>20)}function an(e,t){for(let n of e.zt){let r=e.Rt[n];if(null==r)continue;delete e.Rt[n];let o=e.jt[r.type],i=r.index;if(!t)for(let t of o.array[i].a[1])ln(e,o.array[i],t[0])&&Qt(e,o.array[i],t[1],!0);o.length>1&&(o.array[i]=o.array[o.length-1],o.array[i].index=i,o.array.splice(o.length-1)),o.length-=1;for(let t=0;t<9;++t)for(let r=0;r<e.Ot[t].length;++r)e.Ot[t][r][0]===n&&(e.Ot[t].splice(r,1),r--);for(let t=0;t<e.Bt.length;++t)e.Bt[t][1]===n&&(e.Bt.splice(t,1),t--);for(let t=0;t<e.Et.length;++t)e.Et[t][1]===n&&(e.Et.splice(t,1),t--);if(r.c){let e=r.c.b.indexOf(n);e>-1&&r.c.b.splice(e,1)}for(let t of r.b)e.zt.push(t);let u=e.Fn.xn.length,l=e.Fn._n.length,a=e.kt.lt.length;e.Fn.xn=e.Fn.xn.filter((([e,t])=>e.uid!==n)),e.Fn._n=e.Fn._n.filter((([e,t])=>e.uid!==n)),e.kt.lt=e.kt.lt.filter((([e,t])=>e.uid!==n)),e.Fn.xn.length<u&&(e.Fn.$n=!0),e.Fn._n.length<l&&(e.Fn.Cn=!0),e.kt.lt.length<a&&(e.kt.at=!0)}e.zt=[]}function fn(e){e.Fn.Je.renderScene(e,e.Fn.$n,e.Fn.xn,e.Gt,e.Vt,e.tn),e.kt.Je.renderScene(e,e.kt.at,e.kt.lt,e.Gt,e.Vt,e.tn)}let cn,sn,dn,vn,hn,mn,pn,wn=!1,yn=!1,Mn=[],bn=!0;let gn,An,xn=null,$n=!1,_n=!1,Cn={imgButton:null,modal:null},Fn=[],Tn=!0;let Pn="Challenger",kn=[];const Sn=[[],[0,0]];let In,Dn=Sn,jn={};function Rn(e,t,n){if(yn=!0===t,cn=e,sn=document.getElementById("canvas_canvas"),dn=sn.getContext("2d"),hn=!1,sn.parentElement){let e=document.getElementById("pauseButton");e instanceof HTMLImageElement&&(e.onclick=()=>(_n=!0,void(Cn.imgButton&&Cn.modal&&(Cn.imgButton.style.display="none",Cn.modal.style.display="block")))),Cn.imgButton=e;let t=document.getElementById("modal_o");Cn.modal=t;let n=document.getElementById("modal_bg");n&&(n.onclick=()=>Nn());let r=document.getElementById("resume");r&&(r.onclick=()=>Nn())}pn=!1;var r=new URL(window.location.href);let o=r.searchParams.get("isGhost");mn="true"===o&&!1}function Nn(){_n=!1,Cn.imgButton&&Cn.modal&&(Cn.imgButton.style.display="block",Cn.modal.style.display="none")}function On(e,t,n){Mn=[],gn=e,An=t=t||0,bn=!0,xn=-1,n=[In||Date.now(),[],mn&&!pn?Pn:null],Fn=[];let r=document.getElementById("restart");if(r&&(r.onclick=()=>{Hn(e,t,n),Nn()}),hn)for(let r=0;r<13;++r)Bn(0===r,r,e,t,void 0,n);else Bn(!0,0,e,An,cn,n);wn||yn||(wn=!0,vn=requestAnimationFrame(En))}function Bn(e,t,n,r,o,i){let u=o||document.createElement("canvas");u.width=1080,u.height=1920;let l=Zt(u,document.getElementById("canvas_canvas"),(e=>(e[0]*=1,e[1]*=1,e)),n,r,i);tn(l,[1080,1920]),Mn.push({Wn:e,Zn:""+t,Jn:l,er:u,tr:0,nr:0,Qt:r,Be:i[0],rr:[],ir:0})}function En(){!function(){(!mn||pn)&&zn<Kn&&(zn=1e3);if(pn&&!Tn)return;Gn||(GAMESNACKS&&GAMESNACKS.gameReady(),Gn=!0);if((!Tn||zn<Kn)&&Mn[1]){zn++,!Tn&&zn>Ln&&(zn=Ln);let e=[[],[0,0],[0,0]];rn(Mn[1].Jn,e,e);return fn(Mn[1].Jn),dn.fillStyle="#000000",dn.globalAlpha=Math.max(0,(zn-Ln)/130),dn.setTransform(1,0,0,1,0,0),dn.fillRect(0,0,1080,1920),void(dn.globalAlpha=1)}zn===Kn?(tn(Mn[0].Jn,[1080,1920]),++zn):zn<Un&&++zn;bn||0!==Mn.length||On(gn,An);$n||_n||(Cn.imgButton&&Cn.modal&&(Cn.imgButton.style.display="block",Cn.modal.style.display="none"),$n=!0);if(hn);else{let e=Mn[0];if(e){let t={lost:!1,gameOver:!1};if(!_n&&zn>=Un){let n,r=Kt(!e.Wn,e.nr,e.rr);0,kn[e.Qt]&&(n=kn[e.Qt][e.tr]),n||(n=Dn);let o,i=[n[0],n[1],[n[1][0]-Dn[1][0],n[1][1]-Dn[1][1]],n[3]];Dn=n,pn?(r=i,o=[[],[0,0],[0,0]]):o=i,t=rn(e.Jn,r,o),++e.tr,++e.nr}void 0===t.newLevel?(fn(e.Jn),zn<Un&&(dn.fillStyle="#000000",dn.globalAlpha=Math.min(1,(Un-zn)/70),dn.setTransform(1,0,0,1,0,0),dn.fillRect(0,0,1080,1920),dn.globalAlpha=1)):(e.Qt=t.newLevel,Fn=[],Dn=Sn,e.tr=0),t.lost,t.gameOver&&(Fn=[],jn={},e.tr=0,GAMESNACKS.gameOver())}}}(),vn=requestAnimationFrame(En)}let zn=0;const Ln=50,Kn=180,Un=250;let Gn=!1;function Vn(e,t,n){Rn(e,t)}function qn(){!function(){for(let t of Mn)e=t.Jn,qt.Howler.stop(),e.St={};var e;Mn=[],wn=!1,vn&&window.cancelAnimationFrame(vn)}()}function Hn(e,t,n){On(e,t,n)}function Qn(e){!function(e){let t=[];for(let n=0;n<e;++n){let e=Kt(!0,n,t);rn(Mn[0].Jn,e)}}(e)}function Xn(){return{score:(e=Mn[0].Jn).It,objects:e.jt,objectMap:e.Rt,actions:e.Ot,actionTimers:e.Bt,actionCheckers:e.Et,toDestroyList:e.zt};var e}})(),Kitchen=r})();